import{d as e,aC as t,a1 as i,l,i as a,k as n,aH as s,aa as o,ah as u,o as r,R as d,S as m,a as c,F as f,a7 as h,Y as p,b as y,X as C,a9 as v,K as g,j as b,T as L,Z as S,V as A,M as F}from"./vue.1709626208081.js";import{u as k,_ as x}from"./index.1709626208081.js";import{S as w,L as M}from"./main.1709626208081.js";const V=e({name:"navMenuVertical",components:{SubItem:w},props:{menuList:{type:Array,"default":()=>[]}},setup(e){const u=k(),r=t(),d=i({defaultActive:r.meta.isDynamic?r.meta.isDynamicPath:r.path,isCollapse:!1}),m=l((()=>e.menuList)),c=l((()=>u.state.themeConfig.themeConfig)),f=e=>{const{path:t,meta:i}=e,l=i.isDynamic?i.isDynamicPath.split("/"):t.split("/");return l.length>=4&&(null==i?void 0:i.isHide)?l.splice(0,3).join("/"):t};return a(u.state.themeConfig.themeConfig,(()=>{document.body.clientWidth<=1e3?d.isCollapse=!1:d.isCollapse=c.value.isCollapse}),{immediate:!0}),n((()=>{d.defaultActive=f(r)})),s((e=>{d.defaultActive=f(e);document.body.clientWidth<1e3&&(c.value.isCollapse=!1)})),{menuLists:m,getThemeConfig:c,...o(d)}}});const W=e({name:"layoutAside",components:{Logo:M,Vertical:x(V,[["render",function(e,t,i,l,a,n){const s=u("SvgIcon"),o=u("SubItem"),g=u("el-sub-menu"),b=u("el-menu-item"),L=u("el-menu");return r(),d(L,{router:"","default-active":e.defaultActive,"background-color":"transparent",collapse:e.isCollapse,"unique-opened":e.getThemeConfig.isUniqueOpened,"collapse-transition":!1},{"default":m((()=>[(r(!0),c(f,null,h(e.menuLists,(t=>{var i,l;return r(),c(f,null,[t.children&&t.children.length>0?(r(),d(g,{index:t.path,key:t.path},{title:m((()=>{var i,l,a,n;return[p(s,{name:null==(i=t.meta)?void 0:i.icon},null,8,["name"]),y("span",null,C((null==(l=t.meta)?void 0:l.title.indexOf("."))>0?e.$t(null==(a=t.meta)?void 0:a.title):null==(n=t.meta)?void 0:n.title),1)]})),"default":m((()=>[p(o,{chil:t.children},null,8,["chil"])])),_:2},1032,["index"])):(r(),d(b,{index:t.path,key:t.path},v({"default":m((()=>{var e;return[p(s,{name:null==(e=t.meta)?void 0:e.icon},null,8,["name"])]})),_:2},[!(null==(i=t.meta)?void 0:i.isLink)||(null==(l=t.meta)?void 0:l.isLink)&&t.meta.isIframe?{name:"title",fn:m((()=>{var i,l,a;return[y("span",null,C((null==(i=t.meta)?void 0:i.title.indexOf("."))>0?e.$t(null==(l=t.meta)?void 0:l.title):null==(a=t.meta)?void 0:a.title),1)]})),key:"0"}:{name:"title",fn:m((()=>{var i,l,a,n;return[y("a",{href:null==(i=t.meta)?void 0:i.isLink,target:"_blank",rel:"opener","class":"w100"},C((null==(l=t.meta)?void 0:l.title.indexOf("."))>0?e.$t(null==(a=t.meta)?void 0:a.title):null==(n=t.meta)?void 0:n.title),9,["href"])]})),key:"1"}]),1032,["index"]))],64)})),256))])),_:1},8,["default-active","collapse","unique-opened"])}]])},setup(){const{proxy:e}=b(),t=k(),n=i({menuList:[],clientWidth:0}),s=l((()=>t.state.tagsViewRoutes.isTagsViewCurrenFull)),u=l((()=>{const{layout:e,isCollapse:i,menuBar:l}=t.state.themeConfig.themeConfig,a=["#FFFFFF","#FFF","#fff","#ffffff"].includes(l)?"layout-el-aside-br-color":"";if(n.clientWidth<=1e3){if(i){document.body.setAttribute("class","el-popup-parent--hidden");const e=document.querySelector(".layout-container"),t=document.createElement("div");return t.setAttribute("class","layout-aside-mobile-mode"),e.appendChild(t),t.addEventListener("click",r),[a,"layout-aside-mobile","layout-aside-mobile-open"]}return r(),[a,"layout-aside-mobile","layout-aside-mobile-close"]}return"columns"===e?i?[a,"layout-aside-pc-1"]:[a,"layout-aside-pc-220"]:i?[a,"layout-aside-pc-64"]:[a,"layout-aside-pc-220"]})),r=()=>{const e=document.querySelector(".layout-aside-mobile-mode");null==e||e.setAttribute("style","animation: error-img-two 0.3s"),setTimeout((()=>{var t;null==(t=null==e?void 0:e.parentNode)||t.removeChild(e)}),300);document.body.clientWidth<1e3&&(t.state.themeConfig.themeConfig.isCollapse=!1),document.body.setAttribute("class","")},d=l((()=>{let{layout:e,isShowLogo:i}=t.state.themeConfig.themeConfig;return i&&"defaults"===e||i&&"columns"===e})),m=()=>{if("columns"===t.state.themeConfig.themeConfig.layout)return!1;n.menuList=c(t.state.routesList.routesList)},c=e=>e.filter((e=>{var t;return!(null==(t=e.meta)?void 0:t.isHide)})).map((e=>((e=Object.assign({},e)).children&&(e.children=c(e.children)),e))),f=e=>{n.clientWidth=e};return a(t.state.themeConfig.themeConfig,(t=>{if(t.isShowLogoChange!==t.isShowLogo){if(!e.$refs.layoutAsideScrollbarRef)return!1;e.$refs.layoutAsideScrollbarRef.update()}})),a(t.state,(e=>{let{layout:t,isClassicSplitMenu:i}=e.themeConfig.themeConfig;if("classic"===t&&i)return!1;m()})),g((()=>{f(document.body.clientWidth),m(),e.mittBus.on("setSendColumnsChildren",(e=>{n.menuList=e.children})),e.mittBus.on("setSendClassicChildren",(e=>{let{layout:i,isClassicSplitMenu:l}=t.state.themeConfig.themeConfig;"classic"===i&&l&&(n.menuList=[],n.menuList=e.children)})),e.mittBus.on("getBreadcrumbIndexSetFilterRoutes",(()=>{m()})),e.mittBus.on("layoutMobileResize",(e=>{f(e.clientWidth),r()}))})),{setCollapseStyle:u,setShowLogo:d,isTagsViewCurrenFull:s,onAsideEnterLeave:i=>{let{layout:l}=t.state.themeConfig.themeConfig;if("columns"!==l)return!1;i||e.mittBus.emit("restoreDefault"),t.dispatch("routesList/setColumnsMenuHover",i)},...o(n)}}}),B={"class":"h100"};var R=x(W,[["render",function(e,t,i,l,a,n){const s=u("Logo"),o=u("Vertical"),f=u("el-scrollbar"),h=u("el-aside");return L((r(),c("div",B,[p(h,{"class":F(["layout-aside",e.setCollapseStyle])},{"default":m((()=>[e.setShowLogo?(r(),d(s,{key:0})):A("",!0),p(f,{"class":"flex-auto",ref:"layoutAsideScrollbarRef",onMouseenter:t[0]||(t[0]=t=>e.onAsideEnterLeave(!0)),onMouseleave:t[1]||(t[1]=t=>e.onAsideEnterLeave(!1))},{"default":m((()=>[p(o,{menuList:e.menuList},null,8,["menuList"])])),_:1},512)])),_:1},8,["class"])],512)),[[S,!e.isTagsViewCurrenFull]])}]]);export{R as A};
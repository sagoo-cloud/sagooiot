import{d as e,h as l,a1 as a,i as t,R as d,S as o,n as u,ah as s,o as p,b as n,Y as m,W as r,a as i,F as c,a7 as v,a8 as h}from"./vue.1709626208081.js";import{b as V,E as f}from"./index.1709626208081.js";import{r as b}from"./validator.1709626208081.js";import{a as y}from"./index.17096262080819.js";const _={"class":"dialog-footer"},k=e({__name:"edit",emits:["getList"],setup(e,{expose:k,emit:I}){const g=I,U=l(!1),w=l(),x=l([]),j=l([]),L=l([]),S={menuIds:[],id:void 0,parentId:void 0,name:"",types:2,address:"",method:"",remark:"",status:1},D=a({...S});t((()=>D.types),(()=>{D.parentId=void 0}));const P={parentId:[b("上级分类不能为空","change")],menuIds:[b("关联页面不能为空","change")],method:[b("请求方式不能为空","change")],name:[b("接口名称不能为空")],address:[b("接口地址不能为空")]};y.template.getDictData({DictType:"api_methods"}).then((e=>{L.value=e.values})),V.menu.getList({status:-1}).then((e=>{x.value=e}));const C=async()=>{await w.value.validate();const e=D.id?V.api.edit:V.api.add;await e(D),f.success("操作成功"),F(),U.value=!1,g("getList")},F=async()=>{Object.assign(D,{...S}),w.value&&w.value.resetFields()};return k({open:async e=>{F(),U.value=!0,V.api.getList({types:1,status:-1}).then((e=>{j.value=e.Info})),u((()=>{Object.assign(D,{method:L.value.length?L.value[0].value:"",...e})}))}}),(e,l)=>{const a=s("el-radio-button"),t=s("el-radio-group"),u=s("el-form-item"),V=s("el-cascader"),f=s("el-input"),b=s("el-option"),y=s("el-select"),k=s("el-switch"),I=s("el-form"),g=s("el-button"),S=s("el-dialog");return p(),d(S,{"class":"api-edit",modelValue:U.value,"onUpdate:modelValue":l[11]||(l[11]=e=>U.value=e),title:""+(D.id?"编辑接口":"新增接口"),width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:o((()=>[n("div",_,[m(g,{onClick:l[10]||(l[10]=e=>U.value=!1)},{"default":o((()=>[r("取消")])),_:1}),m(g,{type:"primary",onClick:C},{"default":o((()=>[r("确定")])),_:1})])])),"default":o((()=>[m(I,{ref_key:"formRef",ref:w,model:D,rules:P,"label-width":"80px",onKeyup:h(C,["enter"])},{"default":o((()=>[m(u,{label:"选择类型",prop:"types"},{"default":o((()=>[m(t,{modelValue:D.types,"onUpdate:modelValue":l[0]||(l[0]=e=>D.types=e)},{"default":o((()=>[m(a,{label:2},{"default":o((()=>[r("接口")])),_:1}),m(a,{label:1},{"default":o((()=>[r("分类")])),_:1})])),_:1},8,["modelValue"])])),_:1}),1===D.types?(p(),i(c,{key:0},[m(u,{label:"上级分类",prop:"parentId"},{"default":o((()=>[m(V,{options:[{id:-1,name:"根节点",children:j.value}],props:{checkStrictly:!0,multiple:!1,emitPath:!1,value:"id",label:"name"},placeholder:"请选择关联页面",clearable:"","class":"w100",modelValue:D.parentId,"onUpdate:modelValue":l[1]||(l[1]=e=>D.parentId=e)},null,8,["options","modelValue"])])),_:1}),m(u,{label:"分类名称",prop:"name"},{"default":o((()=>[m(f,{modelValue:D.name,"onUpdate:modelValue":l[2]||(l[2]=e=>D.name=e),placeholder:"输入接口名称"},null,8,["modelValue"])])),_:1})],64)):(p(),i(c,{key:1},[m(u,{label:"上级分类",prop:"parentId"},{"default":o((()=>[m(V,{options:j.value,props:{checkStrictly:!0,multiple:!1,emitPath:!1,value:"id",label:"name"},placeholder:"请选择关联页面",clearable:"","class":"w100",modelValue:D.parentId,"onUpdate:modelValue":l[3]||(l[3]=e=>D.parentId=e)},null,8,["options","modelValue"])])),_:1}),m(u,{label:"关联页面",prop:"menuIds"},{"default":o((()=>[m(V,{options:x.value,props:{checkStrictly:!1,multiple:!0,emitPath:!1,value:"id",label:"title"},placeholder:"请选择关联页面",clearable:"","class":"w100",modelValue:D.menuIds,"onUpdate:modelValue":l[4]||(l[4]=e=>D.menuIds=e)},null,8,["options","modelValue"])])),_:1}),m(u,{label:"接口名称",prop:"name"},{"default":o((()=>[m(f,{modelValue:D.name,"onUpdate:modelValue":l[5]||(l[5]=e=>D.name=e),placeholder:"输入接口名称"},null,8,["modelValue"])])),_:1}),m(u,{label:"接口地址",prop:"address"},{"default":o((()=>[m(f,{modelValue:D.address,"onUpdate:modelValue":l[6]||(l[6]=e=>D.address=e),placeholder:"接口地址"},null,8,["modelValue"])])),_:1}),m(u,{label:"访问类型",prop:"method"},{"default":o((()=>[m(y,{modelValue:D.method,"onUpdate:modelValue":l[7]||(l[7]=e=>D.method=e),placeholder:"请选择访问类型"},{"default":o((()=>[(p(!0),i(c,null,v(L.value,(e=>(p(),d(b,{key:e.value,label:e.key,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(u,{label:"状态",prop:"status"},{"default":o((()=>[m(k,{modelValue:D.status,"onUpdate:modelValue":l[8]||(l[8]=e=>D.status=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1})],64)),m(u,{label:"备注",prop:"remark"},{"default":o((()=>[m(f,{modelValue:D.remark,"onUpdate:modelValue":l[9]||(l[9]=e=>D.remark=e),type:"textarea",rows:3},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}});export{k as default};
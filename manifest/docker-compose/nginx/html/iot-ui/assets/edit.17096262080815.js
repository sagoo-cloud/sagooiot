import{a as e}from"./index.170962620808122.js";import{_ as l,E as a}from"./index.1709626208081.js";import{d as o,h as r,a1 as t,aa as d,a as s,Y as u,S as m,e as n,ah as i,o as p,b as c,W as g,X as f,V as h}from"./vue.1709626208081.js";const F={parentId:0,name:"",key:"",desc:"",sort:0},b=o({name:"deviceEditCate",setup(l,{emit:o}){const s=r(null),u=r(!1),m=t({isShowDialog:!1,ruleForm:{...F},deptData:[],orgData:[],rules:{name:[{required:!0,message:"分类名称不能为空",trigger:"blur"}],key:[{required:!0,message:"分类标识不能为空",trigger:"blur"}]}}),i=()=>{m.isShowDialog=!1},p=()=>{m.ruleForm={...F}};return{loading:u,openDialog:l=>{p(),e.category.getList({status:1}).then((e=>{m.deptData=e.category||[]})),l&&"object"==typeof l?m.ruleForm=l:l&&"number"==typeof l&&(m.ruleForm.parentId=l),m.isShowDialog=!0},closeDialog:i,onCancel:()=>{i()},onSubmit:()=>{const l=n(s);l&&l.validate((async l=>{if(l){if(u.value=!0,m.ruleForm.parentId||(m.ruleForm.parentId=0),m.ruleForm.id)try{await e.category.edit(m.ruleForm),a.success("分类修改成功"),i(),o("getCateList")}catch(r){}else try{await e.category.add(m.ruleForm),a.success("分类添加成功"),i(),o("getCateList")}catch(r){a.error("分类添加失败")}u.value=!1}else u.value=!1}))},formRef:s,...d(m)}}}),y={"class":"system-edit-dept-container"},V={key:0},x={"class":"dialog-footer"};var _=l(b,[["render",function(e,l,a,o,r,t){const d=i("el-cascader"),n=i("el-form-item"),F=i("el-col"),b=i("el-input"),_=i("el-input-number"),w=i("el-row"),k=i("el-form"),D=i("el-button"),v=i("el-dialog");return p(),s("div",y,[u(v,{title:(e.ruleForm.id?"修改":"添加")+"分类",modelValue:e.isShowDialog,"onUpdate:modelValue":l[5]||(l[5]=l=>e.isShowDialog=l),width:"600px"},{footer:m((()=>[c("span",x,[u(D,{onClick:e.onCancel},{"default":m((()=>[g("取 消")])),_:1},8,["onClick"]),u(D,{type:"primary",onClick:e.onSubmit,loading:e.loading},{"default":m((()=>[g(f(e.ruleForm.id?"修 改":"添 加"),1)])),_:1},8,["onClick","loading"])])])),"default":m((()=>[u(k,{ref:"formRef",model:e.ruleForm,rules:e.rules,"label-width":"90px"},{"default":m((()=>[u(w,{gutter:35},{"default":m((()=>[u(F,{xs:24,sm:24,md:24,lg:24,xl:24},{"default":m((()=>[u(n,{label:"上级分类"},{"default":m((()=>[u(d,{options:e.deptData,props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name"},placeholder:"请选择分类",clearable:"","class":"w100",modelValue:e.ruleForm.parentId,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.parentId=l)},{"default":m((({node:e,data:l})=>[c("span",null,f(l.name),1),e.isLeaf?h("",!0):(p(),s("span",V," ("+f(l.children.length)+") ",1))])),_:1},8,["options","modelValue"])])),_:1})])),_:1}),u(F,{xs:24,sm:12,md:16,lg:16,xl:16},{"default":m((()=>[u(n,{label:"分类名称",prop:"name"},{"default":m((()=>[u(b,{modelValue:e.ruleForm.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.name=l),placeholder:"请输入分类名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),u(F,{xs:24,sm:12,md:8,lg:8,xl:8},{"default":m((()=>[u(n,{label:"排序",prop:"sort","label-width":"40px"},{"default":m((()=>[u(_,{modelValue:e.ruleForm.sort,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.sort=l),min:0,"controls-position":"right",placeholder:"请输入排序","class":"w100"},null,8,["modelValue"])])),_:1})])),_:1}),u(F,{xs:24,sm:24,md:24,lg:24,xl:24},{"default":m((()=>[u(n,{label:"分类标识",prop:"key"},{"default":m((()=>[u(b,{modelValue:e.ruleForm.key,"onUpdate:modelValue":l[3]||(l[3]=l=>e.ruleForm.key=l),placeholder:"请输入分类名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),u(F,{xs:24,sm:24,md:24,lg:24,xl:24},{"default":m((()=>[u(n,{label:"描述",prop:"desc"},{"default":m((()=>[u(b,{modelValue:e.ruleForm.desc,"onUpdate:modelValue":l[4]||(l[4]=l=>e.ruleForm.desc=l),type:"textarea",placeholder:"请输入描述",maxlength:"150"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}]]);export{_ as default};
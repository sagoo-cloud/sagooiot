import{d as e,h as a,a1 as l,k as t,aa as d,a as n,Y as o,S as s,ah as p,ar as r,o as i,a8 as u,W as m,T as c,R as f}from"./vue.1709626208081.js";import b from"./edit.170962620808114.js";import{_ as D,b as h,h as y,E as _}from"./index.1709626208081.js";import"./validator.1709626208081.js";const w=e({name:"systemOrg",components:{EditDept:b},setup(){const e=a(),n=a(),o=l({tableData:{data:[],loading:!1,param:{deptName:"",status:-1}}}),s=()=>{o.tableData.loading=!0,h.dept.getList(o.tableData.param).then((e=>{o.tableData.data=e}))["finally"]((()=>o.tableData.loading=!1))};return t((()=>{s()})),{queryRef:n,resetQuery:()=>{n.value.resetFields(),s()},editDeptRef:e,deptList:s,onOpenAddDept:a=>{e.value.openDialog(null==a?void 0:a.deptId)},onOpenEditDept:a=>{e.value.openDialog(a)},onTabelRowDel:e=>{y.confirm(`此操作将永久删除组织：${e.deptName}, 是否继续?`,"提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((()=>{h.dept.del(e.deptId).then((()=>{_.success("删除成功"),s()}))}))},...d(o)}}}),g={"class":"page"};var k=D(w,[["render",function(e,a,l,t,d,b){const D=p("el-input"),h=p("el-form-item"),y=p("el-option"),_=p("el-select"),w=p("ele-Search"),k=p("el-icon"),v=p("el-button"),C=p("ele-Refresh"),N=p("ele-FolderAdd"),x=p("el-form"),R=p("el-table-column"),L=p("el-tag"),A=p("el-table"),O=p("el-card"),V=p("EditDept"),z=r("auth"),E=r("col"),T=r("loading");return i(),n("div",g,[o(O,{shadow:"nover"},{"default":s((()=>[o(x,{model:e.tableData.param,inline:"",ref:"queryRef",onKeyup:u(e.deptList,["enter"])},{"default":s((()=>[o(h,{label:"组织名称",prop:"deptName"},{"default":s((()=>[o(D,{modelValue:e.tableData.param.deptName,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tableData.param.deptName=a),placeholder:"请输入组织名称","class":"w-50",clearable:""},null,8,["modelValue"])])),_:1}),o(h,{label:"状态",prop:"status"},{"default":s((()=>[o(_,{placeholder:"请选择状态","class":"w-50",modelValue:e.tableData.param.status,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tableData.param.status=a)},{"default":s((()=>[o(y,{label:"全部",value:-1}),o(y,{label:"启用",value:1}),o(y,{label:"禁用",value:0})])),_:1},8,["modelValue"])])),_:1}),o(h,null,{"default":s((()=>[o(v,{type:"primary","class":"ml10",onClick:e.deptList},{"default":s((()=>[o(k,null,{"default":s((()=>[o(w)])),_:1}),m(" 查询 ")])),_:1},8,["onClick"]),o(v,{onClick:a[2]||(a[2]=a=>e.resetQuery())},{"default":s((()=>[o(k,null,{"default":s((()=>[o(C)])),_:1}),m(" 重置 ")])),_:1}),c((i(),f(v,{type:"primary","class":"ml10",onClick:e.onOpenAddDept},{"default":s((()=>[o(k,null,{"default":s((()=>[o(N)])),_:1}),m(" 新增组织 ")])),_:1},8,["onClick"])),[[z,"add"]])])),_:1})])),_:1},8,["model","onKeyup"]),c((i(),f(A,{data:e.tableData.data,style:{width:"100%"},"row-key":"deptId","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},{"default":s((()=>[c(o(R,{prop:"deptName",label:"组织名称","show-overflow-tooltip":""},null,512),[[E,"deptName"]]),c((i(),f(R,{prop:"status",label:"组织状态",align:"center","min-width":"120"},{"default":s((e=>[1===e.row.status?(i(),f(L,{key:0,type:"success",size:"small"},{"default":s((()=>[m("启用")])),_:1})):(i(),f(L,{key:1,type:"info",size:"small"},{"default":s((()=>[m("禁用")])),_:1}))])),_:1})),[[E,"status"]]),c(o(R,{prop:"orderNum",label:"排序",align:"center","min-width":"120"},null,512),[[E,"orderNum"]]),c(o(R,{prop:"createdAt",label:"创建时间",align:"center","min-width":"180"},null,512),[[E,"createdAt"]]),c((i(),f(R,{label:"操作",align:"center",width:"140"},{"default":s((a=>[c((i(),f(v,{size:"small",type:"text",onClick:l=>e.onOpenAddDept(a.row)},{"default":s((()=>[m("新增")])),_:2},1032,["onClick"])),[[z,"add"]]),c((i(),f(v,{size:"small",text:"",type:"warning",onClick:l=>e.onOpenEditDept(a.row)},{"default":s((()=>[m("修改")])),_:2},1032,["onClick"])),[[z,"edit"]]),c((i(),f(v,{size:"small",text:"",type:"info",onClick:l=>e.onTabelRowDel(a.row)},{"default":s((()=>[m("删除")])),_:2},1032,["onClick"])),[[z,"del"]])])),_:1})),[[E,"handle"]])])),_:1},8,["data"])),[[T,e.tableData.loading]])])),_:1}),o(V,{ref:"editDeptRef",onDeptList:e.deptList},null,8,["onDeptList"])])}]]);export{k as default};
import{c as e,u as s,_ as t}from"./index.1709626208081.js";import{A as l}from"./aside.1709626208081.js";import{H as i,M as n}from"./main.1709626208081.js";import{d as o,h as a,aC as u,aE as r,a1 as d,l as m,i as c,k as f,H as v,aH as h,aa as C,j as p,n as A,ah as y,o as H,a as x,Y as k,S as M,b as L,F as g,a7 as I,M as O,X as S,R as b,V as _}from"./vue.1709626208081.js";import"./parent.1709626208081.js";const j=o({name:"layoutColumnsAside",setup(){const t=a([]),l=a(),{t:i}=e(),{proxy:n}=p(),o=s(),y=u(),H=r(),x=d({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[],isNavHover:!1}),k=m((()=>o.state.themeConfig.themeConfig.columnsAsideStyle)),M=m((()=>o.state.themeConfig.themeConfig.columnsAsideLayout)),L=e=>{x.liIndex=e,l.value.style.top=`${t.value[e].offsetTop+x.difference}px`},g=e=>{A((()=>{L(e)}))},I=e=>{const s=e.split("/");let t={};return x.columnsAsideList.map(((e,l)=>{e.path===`/${s[1]}`&&(e.k=l,t.item=[{...e}],t.children=[{...e}],e.children&&(t.children=e.children))})),t},O=e=>e.filter((e=>{var s;return!(null==(s=e.meta)?void 0:s.isHide)})).map((e=>((e=Object.assign({},e)).children&&(e.children=O(e.children)),e)));return c(o.state,(e=>{if("columnsRound"===e.themeConfig.themeConfig.columnsAsideStyle?x.difference=3:x.difference=0,e.routesList.isColumnsMenuHover||e.routesList.isColumnsNavHover){if(x.liHoverIndex=x.liOldIndex,!x.liOldPath)return!1;n.mittBus.emit("setSendColumnsChildren",I(x.liOldPath))}else x.liHoverIndex=null,n.mittBus.emit("setSendColumnsChildren",I(y.path))})),f((()=>{(()=>{x.columnsAsideList=O(o.state.routesList.routesList);const e=I(y.path);if(Object.keys(e).length<=0)return!1;g(e.item[0].k),n.mittBus.emit("setSendColumnsChildren",e)})(),n.mittBus.on("restoreDefault",(()=>{x.liOldIndex=null,x.liOldPath=null}))})),v((()=>{n.mittBus.off("restoreDefault",(()=>{}))})),h((e=>{(e=>{x.routeSplit=e.split("/"),x.routeSplit.shift();const s=`/${x.routeSplit[0]}`,t=x.columnsAsideList.find((e=>e.path===s));if(!t)return!1;setTimeout((()=>{g(t.k)}),0)})(e.path),n.mittBus.emit("setSendColumnsChildren",I(e.path))})),{columnsAsideOffsetTopRefs:t,columnsAsideActiveRef:l,onColumnsAsideDown:g,setColumnsAsideStyle:k,setColumnsAsidelayout:M,onColumnsAsideMenuClick:(e,s)=>{L(s);let{path:t,redirect:l}=e;l?H.push(l):H.push(t)},onColumnsAsideMenuMouseenter:(e,s)=>{let{path:t}=e;x.liOldPath=t,x.liOldIndex=s,x.liHoverIndex=s,n.mittBus.emit("setSendColumnsChildren",I(t)),o.dispatch("routesList/setColumnsMenuHover",!1),o.dispatch("routesList/setColumnsNavHover",!0),x.isNavHover=!0},onColumnsAsideMenuMouseleave:async()=>{await o.dispatch("routesList/setColumnsNavHover",!1),setTimeout((()=>{const{isColumnsMenuHover:e,isColumnsNavHover:s}=o.state.routesList;e||s||n.mittBus.emit("restoreDefault")}),100)},tMenuTitle:e=>{let s=e.indexOf(".")>0?i(e):e;return s&&s.length>=4&&s.substring(0,"columns-vertical"===o.state.themeConfig.themeConfig.columnsAsideLayout?4:3),s},...C(x)}}}),B={"class":"layout-columns-aside"},T=["onClick","onMouseenter","title"],F={"class":"columns-vertical-title font12"},N=["href"],R={"class":"columns-vertical-title font12"};const P=o({name:"layoutColumns",components:{Aside:l,Header:i,Main:n,ColumnsAside:t(j,[["render",function(e,s,t,l,i,n){const o=y("SvgIcon"),a=y("el-scrollbar");return H(),x("div",B,[k(a,null,{"default":M((()=>[L("ul",{onMouseleave:s[0]||(s[0]=s=>e.onColumnsAsideMenuMouseleave())},[(H(!0),x(g,null,I(e.columnsAsideList,((s,t)=>{var l,i,n,a,u,r,d,m,c,f;return H(),x("li",{key:t,onClick:l=>e.onColumnsAsideMenuClick(s,t),onMouseenter:l=>e.onColumnsAsideMenuMouseenter(s,t),ref_for:!0,ref:s=>{s&&(e.columnsAsideOffsetTopRefs[t]=s)},"class":O({"layout-columns-active":e.liIndex===t,"layout-columns-hover":e.liHoverIndex===t}),title:(null==(l=s.meta)?void 0:l.title.indexOf("."))>0?e.$t(null==(i=s.meta)?void 0:i.title):null==(n=s.meta)?void 0:n.title},[!(null==(a=s.meta)?void 0:a.isLink)||(null==(u=s.meta)?void 0:u.isLink)&&s.meta.isIframe?(H(),x("div",{key:0,"class":O(e.setColumnsAsidelayout)},[k(o,{name:null==(r=s.meta)?void 0:r.icon},null,8,["name"]),L("div",F,S(e.tMenuTitle(null==(d=s.meta)?void 0:d.title)),1)],2)):(H(),x("div",{key:1,"class":O(e.setColumnsAsidelayout)},[L("a",{href:null==(m=s.meta)?void 0:m.isLink,target:"_blank"},[k(o,{name:null==(c=s.meta)?void 0:c.icon},null,8,["name"]),L("div",R,S(e.tMenuTitle(null==(f=s.meta)?void 0:f.title)),1)],8,N)],2))],42,T)})),128)),L("div",{ref:"columnsAsideActiveRef","class":O(e.setColumnsAsideStyle)},null,2)],32)])),_:1})])}],["__scopeId","data-v-ac8e33d8"]])},setup(){const e=s();return{isFixedHeader:m((()=>e.state.themeConfig.themeConfig.isFixedHeader))}}}),w={"class":"layout-columns-warp"};var D=t(P,[["render",function(e,s,t,l,i,n){const o=y("ColumnsAside"),a=y("Aside"),u=y("Header"),r=y("Main"),d=y("el-scrollbar"),m=y("el-container"),c=y("el-backtop");return H(),b(m,{"class":"layout-container"},{"default":M((()=>[k(o),L("div",w,[k(a),k(m,{"class":O(["flex-center layout-backtop",{"layout-backtop":!e.isFixedHeader}])},{"default":M((()=>[e.isFixedHeader?(H(),b(u,{key:0})):_("",!0),k(d,{"class":O({"layout-backtop":e.isFixedHeader})},{"default":M((()=>[e.isFixedHeader?_("",!0):(H(),b(u,{key:0})),k(r)])),_:1},8,["class"])])),_:1},8,["class"])]),k(c,{target:".layout-backtop .el-scrollbar__wrap"})])),_:1})}]]);export{D as default};
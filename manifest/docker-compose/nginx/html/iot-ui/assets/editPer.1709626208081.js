import{_ as e,b as a,E as l}from"./index.1709626208081.js";import{d as o,h as d,a1 as t,aa as r,R as s,S as u,n as p,ah as n,o as i,b as c,Y as m,W as f,V as h}from"./vue.1709626208081.js";const b={id:void 0,name:"",dataScope:1,deptIds:[]},S=o({props:{deptData:{type:Array,"default":()=>[]}},setup(){const e=d([]),o=d(null),s=d(),u=t({isShowDialog:!1,ruleForm:{...b}}),n=()=>{u.isShowDialog=!1},i=()=>{u.ruleForm={...b}};return{openDialog:async e=>{i();const{id:l,name:o,dataScope:d,deptIds:t}=await a.role.getRole(e.id);u.ruleForm={id:l,name:o,dataScope:d,deptIds:t||[]},u.isShowDialog=!0,p((()=>{t&&t.length&&s.value.setCheckedKeys(t)}))},closeDialog:n,defaultProps:{children:"children",label:"deptName"},treeRef:s,onCancel:()=>{n()},onSubmit:()=>{2===u.ruleForm.dataScope?u.ruleForm.deptIds=s.value.getCheckedKeys(!0):u.ruleForm.deptIds=[],a.role.dataScope(u.ruleForm).then((()=>{l.success("设置数据权限成功"),n()}))},postList:e,formRef:o,...r(u)}}}),g={"class":"tree"},F={"class":"dialog-footer"};var k=e(S,[["render",function(e,a,l,o,d,t){const r=n("el-input"),p=n("el-form-item"),b=n("el-option"),S=n("el-select"),k=n("el-tree"),v=n("el-form"),_=n("el-button"),w=n("el-dialog");return i(),s(w,{"custom-class":"custom-dialog",title:"分配数据权限",modelValue:e.isShowDialog,"onUpdate:modelValue":a[2]||(a[2]=a=>e.isShowDialog=a),width:"500px"},{footer:u((()=>[c("span",F,[m(_,{onClick:e.onCancel},{"default":u((()=>[f("取 消")])),_:1},8,["onClick"]),m(_,{type:"primary",onClick:e.onSubmit},{"default":u((()=>[f("确定")])),_:1},8,["onClick"])])])),"default":u((()=>[m(v,{ref:"formRef",model:e.ruleForm,"label-width":"90px"},{"default":u((()=>[m(p,{label:"角色名称",prop:"name"},{"default":u((()=>[m(r,{modelValue:e.ruleForm.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.ruleForm.name=a),modelModifiers:{trim:!0},disabled:"",placeholder:"请输入角色名称",clearable:""},null,8,["modelValue"])])),_:1}),m(p,{label:"权限范围",prop:"dataScope"},{"default":u((()=>[m(S,{modelValue:e.ruleForm.dataScope,"onUpdate:modelValue":a[1]||(a[1]=a=>e.ruleForm.dataScope=a),placeholder:"请选择",clearable:"","class":"w100"},{"default":u((()=>[m(b,{label:"全部数据权限",value:1}),m(b,{label:"自定数据权限",value:2}),m(b,{label:"本组织数据权限",value:3}),m(b,{label:"本组织及以下数据权限",value:4})])),_:1},8,["modelValue"])])),_:1}),2===e.ruleForm.dataScope?(i(),s(p,{key:0,label:"数据权限",prop:"deptIds"},{"default":u((()=>[c("div",g,[m(k,{ref:"treeRef",data:e.deptData,"show-checkbox":"","default-expand-all":"","node-key":"deptId","highlight-current":"",props:e.defaultProps,"check-on-click-node":"","expand-on-click-node":!1},null,8,["data","props"])])])),_:1})):h("",!0)])),_:1},8,["model"])])),_:1},8,["modelValue"])}],["__scopeId","data-v-2da4d910"]]);export{k as default};
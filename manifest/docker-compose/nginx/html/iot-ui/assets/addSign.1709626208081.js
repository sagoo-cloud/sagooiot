import{_ as e,E as l}from"./index.1709626208081.js";import{d as a,a1 as r,h as s,aa as o,a as d,Y as u,S as t,ah as n,o as i,b as m,W as g,F as c,a7 as p,aA as f,aB as b}from"./vue.1709626208081.js";const v=a({name:"AddOrEditAssess",setup(e,{emit:a}){const d=r({isShowDialog:!1,ruleForm:{name:"",title:"",weight:"",ranges:[]},index:null,isEdit:!1}),u=s(),t=r({name:[{required:!0,message:"请输入标识",trigger:"blur"}],title:[{required:!0,message:"请输入数据项名称",trigger:"blur"}],weight:[{required:!0,message:"请输入权重",trigger:"blur"}]}),n=()=>{d.isShowDialog=!1};return{rules:t,ruleTagRef:u,openDialog:(e,l,a)=>{a||(d.ruleForm={name:"",title:"",weight:"",ranges:[]}),e&&(d.ruleForm=e),d.index=l,d.isEdit=a,d.isShowDialog=!0},closeDialog:n,addRange:()=>{if(!d.ruleForm.ranges.length)return void d.ruleForm.ranges.push({start_value:"",end_value:"",base_value:""});let e=d.ruleForm.ranges[d.ruleForm.ranges.length-1];const{start_value:a,end_value:r,base_value:s}=e;a&&r&&s.toString()?a>=r?l.error("最大值最小值范围设置错误"):d.ruleForm.ranges.push({start_value:"",end_value:"",base_value:""}):l.error("请完善表单")},deleteRange:e=>{d.ruleForm.ranges.splice(e,1)},onCancel:()=>{n()},onSubmit:async e=>{e&&await e.validate((e=>{if(e){if(d.ruleForm.ranges.length){let e=d.ruleForm.ranges[d.ruleForm.ranges.length-1];const{start_value:a,end_value:r,base_value:s}=e;if(!a||!r||!s.toString())return void l.error("取值范围不能为空");if(a>=r)return void l.error("最大值最小值范围设置错误")}a("handleChange",d.ruleForm,d.index,d.isEdit),n()}}))},...o(d)}}}),_=e=>(f("data-v-4758fecd"),e=e(),b(),e),h={"class":"add-or-edit-assess"},V=_((()=>m("span",{"class":"symbol"},"%",-1))),F={"class":"add-value-range"},w={"class":"header"},x=_((()=>m("p",null,"添加取值范围",-1))),y={"class":"add-value-range-wrap"},C={"class":"left-wrap"},S=_((()=>m("span",{"class":"symbol"},"*",-1))),U=_((()=>m("span",{"class":"label"},"取值范围",-1))),k=_((()=>m("span",null," ～ ",-1))),D={"class":"right-wrap"},R=_((()=>m("span",{"class":"symbol"},"*",-1))),E=_((()=>m("span",{"class":"label"},"得分",-1))),z={"class":"dialog-footer"};var M=e(v,[["render",function(e,l,a,r,s,o){const f=n("el-input"),b=n("el-form-item"),v=n("el-col"),_=n("el-row"),M=n("el-form"),q=n("el-button"),A=n("el-dialog");return i(),d("div",h,[u(A,{title:e.isEdit?"编辑标识项":"新建标识项",modelValue:e.isShowDialog,"onUpdate:modelValue":l[4]||(l[4]=l=>e.isShowDialog=l),width:"569px"},{footer:t((()=>[m("span",z,[u(q,{onClick:e.onCancel},{"default":t((()=>[g("取 消")])),_:1},8,["onClick"]),u(q,{type:"primary",onClick:l[3]||(l[3]=l=>e.onSubmit(e.ruleTagRef))},{"default":t((()=>[g("保 存")])),_:1})])])),"default":t((()=>[u(M,{"class":"add-flag-container",ref:"ruleTagRef",rules:e.rules,model:e.ruleForm,"label-width":"100px"},{"default":t((()=>[u(_,{gutter:35},{"default":t((()=>[u(v,{xs:24,sm:24,md:24,lg:24,xl:24,"class":"mb20"},{"default":t((()=>[u(b,{label:"标识",prop:"name"},{"default":t((()=>[u(f,{modelValue:e.ruleForm.name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.name=l),placeholder:"请输入标识",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),u(v,{xs:24,sm:24,md:24,lg:24,xl:24,"class":"mb20"},{"default":t((()=>[u(b,{label:"数据项名称",prop:"title"},{"default":t((()=>[u(f,{modelValue:e.ruleForm.title,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.title=l),placeholder:"请输入数据项名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),u(v,{xs:24,sm:24,md:24,lg:24,xl:24,"class":"mb20"},{"default":t((()=>[u(b,{"class":"has-symbol",label:"权重",prop:"weight"},{"default":t((()=>[u(f,{modelValue:e.ruleForm.weight,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.weight=l),modelModifiers:{number:!0},placeholder:"请输入权重",clearable:""},null,8,["modelValue"]),V])),_:1})])),_:1})])),_:1})])),_:1},8,["rules","model"]),m("div",F,[m("div",w,[x,u(q,{onClick:e.addRange,size:"small",plain:"",type:"primary"},{"default":t((()=>[g("添加")])),_:1},8,["onClick"])]),m("div",y,[(i(!0),d(c,null,p(e.ruleForm.ranges,((l,a)=>(i(),d("section",{"class":"add-value-range-item",key:a},[m("div",C,[S,U,u(f,{size:"small",modelValue:l.start_value,"onUpdate:modelValue":e=>l.start_value=e,modelModifiers:{number:!0},placeholder:"请输入最小值",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),k,u(f,{size:"small",modelValue:l.end_value,"onUpdate:modelValue":e=>l.end_value=e,modelModifiers:{number:!0},placeholder:"请输入最大值",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),m("div",D,[R,E,u(f,{size:"small",modelValue:l.base_value,"onUpdate:modelValue":e=>l.base_value=e,modelModifiers:{number:!0},placeholder:"请输入得分",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),u(q,{onClick:l=>e.deleteRange(a),size:"small",type:"danger"},{"default":t((()=>[g("删除")])),_:2},1032,["onClick"])])))),128))])])])),_:1},8,["title","modelValue"])])}],["__scopeId","data-v-4758fecd"]]);export{M as default};
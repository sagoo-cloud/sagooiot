import{d as e,h as a,a as l,Y as t,S as o,ah as i,ar as r,o as n,b as s,e as d,a8 as p,W as m,T as u,R as c,X as f,V as y}from"./vue.1709626208081.js";import b from"./edit.17096262080819.js";import _ from"./importFile.1709626208081.js";import{a as g}from"./modbus.1709626208081.js";import{u as w}from"./useCommonModbus.1709626208081.js";import{g as h,h as k,E as v}from"./index.1709626208081.js";import"./dataAreaDialog.1709626208081.js";import"./deviceTemplateDialog.1709626208081.js";const x={"class":"page"},C={"class":"search"},j=e({__name:"index",setup(e){const j=a(),z=a(),F=a(),{params:T,tableData:D,getList:R,loading:V}=w(g.template.getList,"list",{title:"",number:""});R();const L=async e=>{z.value.open(e?"update":"create",e)};return(e,a)=>{const w=i("el-input"),U=i("el-form-item"),A=i("ele-Search"),B=i("el-icon"),S=i("el-button"),q=i("ele-Refresh"),E=i("ele-FolderAdd"),G=i("el-form"),K=i("el-table-column"),M=i("el-table"),N=i("pagination"),P=i("el-card"),W=r("auth"),X=r("loading");return n(),l("div",x,[t(P,{shadow:"nover"},{"default":o((()=>[s("div",C,[t(G,{model:d(T),inline:"",ref_key:"queryRef",ref:F},{"default":o((()=>[t(U,{label:"模板名称",prop:"title"},{"default":o((()=>[t(w,{modelValue:d(T).title,"onUpdate:modelValue":a[0]||(a[0]=e=>d(T).title=e),placeholder:"请输入模板名称",clearable:"",style:{width:"240px"},onKeyup:a[1]||(a[1]=p((e=>d(R)(1)),["enter","native"]))},null,8,["modelValue"])])),_:1}),t(U,null,{"default":o((()=>[t(S,{type:"primary","class":"ml10",onClick:a[2]||(a[2]=e=>d(R)(1))},{"default":o((()=>[t(B,null,{"default":o((()=>[t(A)])),_:1}),m(" 查询 ")])),_:1}),t(S,{onClick:a[3]||(a[3]=e=>(F.value.resetFields(),void R(1)))},{"default":o((()=>[t(B,null,{"default":o((()=>[t(q)])),_:1}),m(" 重置 ")])),_:1}),u((n(),c(S,{type:"primary",onClick:a[4]||(a[4]=e=>L())},{"default":o((()=>[t(B,null,{"default":o((()=>[t(E)])),_:1}),m(" 新增模板 ")])),_:1})),[[W,"add"]])])),_:1})])),_:1},8,["model"])]),u((n(),c(M,{data:d(D),style:{width:"100%"}},{"default":o((()=>[t(K,{type:"index",label:"序号",width:"80",align:"center"}),t(K,{prop:"title",label:"模板名称",align:"center","show-overflow-tooltip":""}),t(K,{prop:"mode",label:"模式",align:"center",width:"120","show-overflow-tooltip":""},{"default":o((({row:e})=>[m(f(0===e.mode?"顺序读取":"批量读取"),1)])),_:1}),t(K,{prop:"remarks",label:"备注",align:"center","show-overflow-tooltip":""}),t(K,{label:"操作",width:"160",align:"center"},{"default":o((e=>[u((n(),c(S,{size:"small",text:"",type:"primary",onClick:a=>(async e=>{j.value.templateNumber=e.number,j.value.openDialog()})(e.row)},{"default":o((()=>[m("导入")])),_:2},1032,["onClick"])),[[W,"upload"]]),u((n(),c(S,{size:"small",text:"",type:"primary",onClick:a=>(async e=>{window.open(h("/base-api/modbus/data_area/export?number="+e.number))})(e.row)},{"default":o((()=>[m("导出")])),_:2},1032,["onClick"])),[[W,"download"]]),u((n(),c(S,{size:"small",text:"",type:"primary",onClick:a=>L(e.row)},{"default":o((()=>[m("详情")])),_:2},1032,["onClick"])),[[W,"detail"]]),u((n(),c(S,{size:"small",text:"",type:"info",onClick:a=>{return l=e.row,void k.confirm(`此操作将删除模板：“${l.title}”，是否继续?`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((async()=>{await g.template.deleteTemplate({number:l.number}),v.success("删除成功"),R()}));var l}},{"default":o((()=>[m("删除")])),_:2},1032,["onClick"])),[[W,"del"]])])),_:1})])),_:1},8,["data"])),[[X,d(V)]]),d(T).total?(n(),c(N,{key:0,total:d(T).total,page:d(T).page,"onUpdate:page":a[5]||(a[5]=e=>d(T).page=e),limit:d(T).size,"onUpdate:limit":a[6]||(a[6]=e=>d(T).size=e),onPagination:a[7]||(a[7]=e=>d(R)())},null,8,["total","page","limit"])):y("",!0),t(b,{ref_key:"editFormRef",ref:z,onGetList:a[8]||(a[8]=e=>d(R)(1))},null,512),t(_,{ref_key:"importFile",ref:j},null,512)])),_:1})])}}});export{j as default};
import{a as e}from"./index.170962620808122.js";import{_ as l,E as a}from"./index.1709626208081.js";import{d as o,h as t,a1 as u,aa as d,a as r,Y as p,S as m,e as s,ah as n,o as i,b as y,W as c,X as g,F as h,a7 as f,R as b,V}from"./vue.1709626208081.js";const v=o({name:"deviceEditPro",setup(l,{emit:o}){const r=t(null),p=u({isShowDialog:!1,typeData:[],type:"",valueType:{type:"",maxLength:""},ruleForm:{name:"",key:"",transportProtocol:"",accessMode:"1",status:1,valueType:{type:"",maxLength:""},desc:""},rules:{name:[{required:!0,message:"属性定义名称不能为空",trigger:"blur"}],key:[{required:!0,message:"属性定义标识不能为空",trigger:"blur"}],accessMode:[{required:!0,message:"请选择是否只读",trigger:"blur"}]}}),m=()=>{p.ruleForm={id:0,name:"",dictType:"",status:1,desc:""}},n=()=>{p.isShowDialog=!1};return{openDialog:l=>{m(),e.product.getDataType({status:-1}).then((e=>{const l=Object.values(e.dataType);l.forEach(((e,a)=>{0==a?(l[a].label="基础类型",l[a].options=e):(l[a].label="扩展类型",l[a].options=e)})),p.typeData=l||[]})),l&&(p.ruleForm=l),p.isShowDialog=!0},seletChange:e=>{p.type=e},closeDialog:n,onCancel:()=>{n()},onSubmit:()=>{const l=s(r);l&&l.validate((l=>{l&&(0!==p.ruleForm.id?e.product.edit(p.ruleForm).then((()=>{a.success("属性定义类型修改成功"),n(),o("typeList")})):(p.ruleForm.valueType=p.valueType,e.model.propertyadd(p.ruleForm).then((()=>{a.success("属性定义类型添加成功"),n(),o("typeList")}))))}))},formRef:r,...d(p)}}}),_={"class":"system-edit-dic-container"},x={"class":"dialog-footer"};var F=l(v,[["render",function(e,l,a,o,t,u){const d=n("el-input"),s=n("el-form-item"),v=n("el-option"),F=n("el-option-group"),T=n("el-select"),L=n("el-radio"),k=n("el-radio-group"),D=n("el-form"),C=n("el-button"),U=n("el-dialog");return i(),r("div",_,[p(U,{title:(0!==e.ruleForm.id?"修改":"添加")+"属性定义",modelValue:e.isShowDialog,"onUpdate:modelValue":l[9]||(l[9]=l=>e.isShowDialog=l),width:"769px"},{footer:m((()=>[y("span",x,[p(C,{onClick:e.onCancel},{"default":m((()=>[c("取 消")])),_:1},8,["onClick"]),p(C,{type:"primary",onClick:e.onSubmit},{"default":m((()=>[c(g(0!==e.ruleForm.id?"修 改":"添 加"),1)])),_:1},8,["onClick"])])])),"default":m((()=>[p(D,{model:e.ruleForm,ref:"formRef",rules:e.rules,"label-width":"120px"},{"default":m((()=>[p(s,{label:"属性定义标识",prop:"key"},{"default":m((()=>[p(d,{modelValue:e.ruleForm.key,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.key=l),placeholder:"请输入属性定义标识"},null,8,["modelValue"])])),_:1}),p(s,{label:"属性定义名称",prop:"name"},{"default":m((()=>[p(d,{modelValue:e.ruleForm.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.name=l),modelModifiers:{trim:!0},placeholder:"请输入属性定义名称"},null,8,["modelValue"])])),_:1}),p(s,{label:"数据类型",prop:"type"},{"default":m((()=>[p(T,{modelValue:e.valueType.type,"onUpdate:modelValue":l[2]||(l[2]=l=>e.valueType.type=l),placeholder:"请选择数据类型",onChange:e.seletChange},{"default":m((()=>[(i(!0),r(h,null,f(e.typeData,(e=>(i(),b(F,{key:e.label,label:e.label},{"default":m((()=>[(i(!0),r(h,null,f(e.options,(e=>(i(),b(v,{key:e.type,label:e.title,value:e.type},null,8,["label","value"])))),128))])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),"float"==e.type||"double"==e.type?(i(),b(s,{key:0,label:"精度",prop:"maxLength1"},{"default":m((()=>[p(d,{modelValue:e.valueType.maxLength1,"onUpdate:modelValue":l[3]||(l[3]=l=>e.valueType.maxLength1=l),placeholder:"请输入精度"},null,8,["modelValue"])])),_:1})):V("",!0),"int"==e.type||"long"==e.type||"float"==e.type||"double"==e.type?(i(),b(s,{key:1,label:"单位",prop:"maxLength"},{"default":m((()=>[p(d,{modelValue:e.valueType.maxLength,"onUpdate:modelValue":l[4]||(l[4]=l=>e.valueType.maxLength=l),placeholder:"请输入单位"},null,8,["modelValue"])])),_:1})):V("",!0),"string"==e.type?(i(),b(s,{key:2,label:"最大长度",prop:"maxLength"},{"default":m((()=>[p(d,{modelValue:e.valueType.maxLength,"onUpdate:modelValue":l[5]||(l[5]=l=>e.valueType.maxLength=l),placeholder:"请输入最大长度"},null,8,["modelValue"])])),_:1})):V("",!0),"date"==e.type?(i(),b(s,{key:3,label:"时间格式",prop:"maxLength"},{"default":m((()=>[p(d,{modelValue:e.valueType.maxLength,"onUpdate:modelValue":l[6]||(l[6]=l=>e.valueType.maxLength=l),placeholder:"请输入时间格式"},null,8,["modelValue"])])),_:1})):V("",!0),p(s,{label:"是否只读",prop:"accessMode"},{"default":m((()=>[p(k,{modelValue:e.ruleForm.accessMode,"onUpdate:modelValue":l[7]||(l[7]=l=>e.ruleForm.accessMode=l)},{"default":m((()=>[p(L,{label:"1"},{"default":m((()=>[c("只读")])),_:1}),p(L,{label:"0"},{"default":m((()=>[c("读写")])),_:1})])),_:1},8,["modelValue"])])),_:1}),p(s,{label:"属性定义描述\t",prop:"desc"},{"default":m((()=>[p(d,{modelValue:e.ruleForm.desc,"onUpdate:modelValue":l[8]||(l[8]=l=>e.ruleForm.desc=l),type:"textarea",placeholder:"请输入属性定义描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}],["__scopeId","data-v-36ab2247"]]);export{F as default};
import{a as e}from"./modbus.1709626208081.js";import{_ as a,h as l,E as t}from"./index.1709626208081.js";import{a as n,b as i,Y as o,S as r,T as d,R as s,ah as u,ar as m,o as p,W as c,V as h}from"./vue.1709626208081.js";const g={"class":"component-container"},b={"class":"filter-container"},f={key:0},V={key:1};var _=a({props:{templateNumber:String},data:()=>({tableKey:0,list:[],total:0,listLoading:!1,listQuery:{page:1,size:20}}),mounted(){this.getList()},methods:{getList(){this.listLoading=!0,e.area.getList({template_number:this.templateNumber}).then((e=>{this.list=e.list||[],this.total=e.Total}))["finally"]((()=>{this.listLoading=!1}))},handleAdd(){this.list.push({name:"",address:"",length:"",regArea:"",remarks:"",templateNumber:this.templateNumber})},handleDelete(a,n){l.confirm('是否确认删除数据区名称为"'+a.name+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{a.taId?e.area.deleteDataArea({ta_id:a.taId}).then((()=>{this.getList(),t.success("删除成功")})):this.list.splice(n,1)}))},handleSubmit(a){a.taId?e.area.editDataArea(a).then((()=>{this.getList(),t.success("操作成功！")})):e.area.addDataArea(a).then((()=>{this.getList(),t.success("操作成功！")}))}}},[["render",function(e,a,l,t,_,y){const k=u("el-button"),w=u("el-input"),A=u("el-table-column"),L=u("el-input-number"),U=u("el-option"),v=u("el-select"),C=u("el-table"),I=m("loading");return p(),n("div",g,[i("div",b,[o(k,{"class":"filter-item",type:"primary",icon:"el-icon-circle-plus-outline",onClick:y.handleAdd},{"default":r((()=>[c(" 添加数据区 ")])),_:1},8,["onClick"])]),d((p(),s(C,{key:_.tableKey,data:_.list,border:"",fit:"","highlight-current-row":"",style:{width:"100%"}},{"default":r((()=>[o(A,{label:"名称",prop:"name",align:"center"},{"default":r((({row:e})=>[o(w,{modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o(A,{label:"起始地址",prop:"address",align:"center"},{"default":r((({row:e})=>[o(L,{modelValue:e.address,"onUpdate:modelValue":a=>e.address=a,"controls-position":"right",min:0,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o(A,{label:"长度",prop:"length",align:"center"},{"default":r((({row:e})=>[o(L,{modelValue:e.length,"onUpdate:modelValue":a=>e.length=a,"controls-position":"right",min:0,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o(A,{label:"寄存器区",prop:"regArea",align:"center"},{"default":r((({row:e})=>[o(v,{modelValue:e.regArea,"onUpdate:modelValue":a=>e.regArea=a},{"default":r((()=>[o(U,{label:"HOLDING",value:"holding"}),o(U,{label:"INPUT",value:"input"}),o(U,{label:"DISCRETE",value:"discrete"}),o(U,{label:"COIL",value:"coil"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),o(A,{label:"读取属性",prop:"",align:"center"},{"default":r((({row:e})=>["input"===e.regArea||"discrete"===e.regArea?(p(),n("span",f,"只读")):"holding"===e.regArea||"coil"===e.regArea?(p(),n("span",V,"读写")):h("",!0)])),_:1}),o(A,{label:"备注",prop:"remarks",align:"center"},{"default":r((({row:e})=>[o(w,{modelValue:e.remarks,"onUpdate:modelValue":a=>e.remarks=a,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o(A,{label:"操作",align:"center",width:"180px"},{"default":r((({row:e,$index:a})=>[o(k,{type:"primary",size:"small",onClick:a=>y.handleSubmit(e)},{"default":r((()=>[c(" 保存 ")])),_:2},1032,["onClick"]),o(k,{type:"danger",size:"small",onClick:l=>y.handleDelete(e,a)},{"default":r((()=>[c(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[I,_.listLoading]])])}],["__scopeId","data-v-11de1bd1"]]);export{_ as default};
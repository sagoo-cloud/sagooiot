import{d as e,h as a,a1 as t,k as l,aa as i,a as n,Y as o,S as s,ah as d,ar as r,o as p,a8 as c,W as u,T as f,R as m,b as g,M as b,Z as y}from"./vue.1709626208081.js";import h from"./editPro.17096262080813.js";import{_ as k,b as D,E as w,h as _}from"./index.1709626208081.js";const C=e({name:"deviceproduct",components:{EditDic:h},setup(){const e=a(),n=a(),o=a(),s=t({ids:[],tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,keyWord:"",dateRange:[]}},isShowMore:!0}),d=()=>{s.tableData.loading=!0,s.tableData.data=[],s.tableData.total=0,D.blackList.getList(s.tableData.param).then((e=>{s.tableData.data=e.list,s.tableData.total=e.total}))["finally"]((()=>s.tableData.loading=!1))};l((()=>{d()}));return{addDicRef:e,editDicRef:n,queryRef:o,onChangeStatus:(e,a)=>{D.blackList.changeStatus({id:e,status:a}).then((()=>{w.success(1==a?"已开启":"已关闭"),d()}))},onOpenAdd:()=>{n.value.openDialog()},onOpenEditDic:e=>{n.value.openDialog(e)},onRowDel:e=>{let a="你确定要删除所选数据？",t=[];e?(a=`此操作将永久删除IP：“${e.ip}”，是否继续?`,t=[e.id]):t=s.ids,0!==t.length?_.confirm(a,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{D.blackList["delete"](t).then((()=>{w.success("删除成功"),d()}))}))["catch"]((()=>{})):w.error("请选择要删除的数据。")},typeList:d,resetQuery:e=>{e&&(e.resetFields(),d())},handleSelectionChange:e=>{s.ids=e.map((e=>e.id))},...i(s)}}}),S={"class":"page"},v={"class":"more-opearte-wrap"};var R=k(C,[["render",function(e,a,t,l,i,h){const k=d("el-input"),D=d("el-form-item"),w=d("ele-Search"),_=d("el-icon"),C=d("el-button"),R=d("ele-Refresh"),x=d("ele-FolderAdd"),L=d("ele-Delete"),z=d("el-form"),P=d("el-table-column"),A=d("el-tag"),E=d("el-divider"),M=d("el-popover"),T=d("el-table"),W=d("pagination"),I=d("el-card"),O=d("EditDic"),j=r("auth"),q=r("col"),N=r("loading");return p(),n("div",S,[o(I,{shadow:"nover"},{"default":s((()=>[o(z,{model:e.tableData.param,ref:"queryRef",inline:"","label-width":"68px"},{"default":s((()=>[o(D,{label:"IP地址",prop:"keyWord"},{"default":s((()=>[o(k,{modelValue:e.tableData.param.keyWord,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tableData.param.keyWord=a),placeholder:"请输入IP地址",clearable:"",style:{width:"240px"},onKeyup:c(e.typeList,["enter","native"])},null,8,["modelValue","onKeyup"])])),_:1}),o(D,null,{"default":s((()=>[o(C,{type:"primary","class":"ml10",onClick:e.typeList},{"default":s((()=>[o(_,null,{"default":s((()=>[o(w)])),_:1}),u(" 查询 ")])),_:1},8,["onClick"]),o(C,{onClick:a[1]||(a[1]=a=>e.resetQuery(e.queryRef))},{"default":s((()=>[o(_,null,{"default":s((()=>[o(R)])),_:1}),u(" 重置 ")])),_:1}),f((p(),m(C,{type:"primary","class":"ml10",onClick:e.onOpenAdd},{"default":s((()=>[o(_,null,{"default":s((()=>[o(x)])),_:1}),u(" 新建 ")])),_:1},8,["onClick"])),[[j,"add"]]),f((p(),m(C,{type:"info","class":"ml10",onClick:a[2]||(a[2]=a=>e.onRowDel(null))},{"default":s((()=>[o(_,null,{"default":s((()=>[o(L)])),_:1}),u(" 批量删除 ")])),_:1})),[[j,"del"]])])),_:1})])),_:1},8,["model"]),f((p(),m(T,{data:e.tableData.data,style:{width:"100%"},onSelectionChange:e.handleSelectionChange},{"default":s((()=>[o(P,{type:"selection",width:"55",align:"center"}),f(o(P,{label:"IP",prop:"ip"},null,512),[[q,"ip"]]),f(o(P,{label:"备注",prop:"remark","show-overflow-tooltip":""},null,512),[[q,"remark"]]),f((p(),m(P,{align:"center",prop:"status",label:"状态"},{"default":s((e=>[0==e.row.status?(p(),m(A,{key:0,"class":"ml-2",type:"info"},{"default":s((()=>[u("停用")])),_:1})):(p(),m(A,{key:1,"class":"ml-2",type:"success"},{"default":s((()=>[u("正常")])),_:1}))])),_:1})),[[q,"status"]]),f(o(P,{prop:"createdAt",label:"创建时间",align:"center",width:"180"},null,512),[[q,"createdAt"]]),f((p(),m(P,{label:"操作",width:"150",align:"center",fixed:"right"},{"default":s((t=>[f((p(),m(C,{size:"small",text:"",type:"warning",onClick:a=>e.onOpenEditDic(t.row)},{"default":s((()=>[u("编辑")])),_:2},1032,["onClick"])),[[j,"edit"]]),f((p(),m(C,{size:"small",text:"",type:"info",onClick:a=>e.onRowDel(t.row)},{"default":s((()=>[u("删除")])),_:2},1032,["onClick"])),[[j,"del"]]),o(M,{placement:"bottom",width:154,trigger:"click"},{reference:s((()=>[f((p(),m(C,{size:"small",type:"text","class":"more-btn",onClick:a[3]||(a[3]=a=>e.isShowMore=!e.isShowMore)},{"default":s((()=>[u("更多 "),g("i",{style:{"margin-left":"2px"},"class":b(e.isShowMore?"fa fa-angle-down":"fa fa-angle-up")},null,2)])),_:1})),[[j,"more"]])])),"default":s((()=>[g("div",v,[f((p(),m(C,{onClick:a=>e.onChangeStatus(t.row.id,1),disabled:1==t.row.status,link:"",size:"small",key:"success",type:"success"},{"default":s((()=>[u("设为启用")])),_:2},1032,["onClick","disabled"])),[[j,"on"]]),o(E,{direction:"vertical"}),f((p(),m(C,{onClick:a=>e.onChangeStatus(t.row.id,0),disabled:0==t.row.status,link:"",size:"small",key:"warning",type:"warning"},{"default":s((()=>[u("设为禁用")])),_:2},1032,["onClick","disabled"])),[[j,"off"]])])])),_:2},1024)])),_:1})),[[q,"handle"]])])),_:1},8,["data","onSelectionChange"])),[[N,e.tableData.loading]]),f(o(W,{total:e.tableData.total,page:e.tableData.param.pageNum,"onUpdate:page":a[4]||(a[4]=a=>e.tableData.param.pageNum=a),limit:e.tableData.param.pageSize,"onUpdate:limit":a[5]||(a[5]=a=>e.tableData.param.pageSize=a),onPagination:e.typeList},null,8,["total","page","limit","onPagination"]),[[y,e.tableData.total>0]])])),_:1}),o(O,{ref:"editDicRef",onTypeList:e.typeList},null,8,["onTypeList"])])}]]);export{R as default};
import{_ as e,b as l,E as a}from"./index.1709626208081.js";import{d as r,h as o,a1 as s,k as d,aa as t,a as u,Y as m,S as i,e as p,ah as n,o as c,b as g,W as f,X as b,R as h,V}from"./vue.1709626208081.js";const x={userName:"",userNickname:"",deptId:null,mobile:"",birthday:"",userPassword:"",userEmail:"",avatar:"",address:"",describe:"",remark:"",sex:0,isAdmin:1,status:1,postIds:[],roleIds:[],userTypes:"system"},F=r({name:"systemEditUser",props:{deptData:{type:Array,"default":()=>[]},roleData:{type:Array,"default":()=>[]},postData:{type:Array,"default":()=>[]}},setup(e,{emit:r}){const u=o([]),m=o(null),i=s({isShowDialog:!1,ruleForm:{...x},rules:{userName:[{required:!0,message:"用户名不能为空",trigger:"blur"}],userNickname:[{required:!0,message:"姓名不能为空",trigger:"blur"}],deptId:[{required:!0,message:"归属组织不能为空",trigger:"blur"}],postIds:[{required:!0,message:"岗位不能为空",trigger:"blur"}],roleIds:[{required:!0,message:"角色不能为空",trigger:"blur"}],mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"}],password:[{required:!0,message:"用户密码不能为空",trigger:"blur"}],userEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}]}}),n=()=>{i.isShowDialog=!1};d((()=>{}));const c=()=>{i.ruleForm={...x}};return{openDialog:e=>{c(),e?l.user.detail(e.id).then((e=>{i.ruleForm=e,i.isShowDialog=!0})):i.isShowDialog=!0},closeDialog:n,onCancel:()=>{n()},onSubmit:()=>{const e=p(m);e&&e.validate((e=>{e&&(i.ruleForm.id?l.user.edit(i.ruleForm).then((()=>{a.success("用户修改成功"),n(),r("getUserList")})):l.user.add(i.ruleForm).then((()=>{a.success("用户添加成功"),n(),r("getUserList")})))}))},postList:u,formRef:m,...t(i)}}}),_={"class":"system-edit-user-container"},y={key:0},k={key:0},w={key:0},v={"class":"dialog-footer"};var I=e(F,[["render",function(e,l,a,r,o,s){const d=n("el-input"),t=n("el-form-item"),p=n("el-col"),x=n("el-cascader"),F=n("el-option"),I=n("el-select"),U=n("el-switch"),D=n("el-row"),N=n("el-form"),S=n("el-button"),q=n("el-dialog");return c(),u("div",_,[m(q,{title:(e.ruleForm.id?"修改":"添加")+"用户",modelValue:e.isShowDialog,"onUpdate:modelValue":l[11]||(l[11]=l=>e.isShowDialog=l),width:"769px"},{footer:i((()=>[g("span",v,[m(S,{onClick:e.onCancel},{"default":i((()=>[f("取 消")])),_:1},8,["onClick"]),m(S,{type:"primary",onClick:e.onSubmit},{"default":i((()=>[f(b(e.ruleForm.id?"修 改":"添 加"),1)])),_:1},8,["onClick"])])])),"default":i((()=>[m(N,{ref:"formRef",model:e.ruleForm,rules:e.rules,"label-width":"90px"},{"default":i((()=>[m(D,{gutter:35},{"default":i((()=>[e.ruleForm.id?V("",!0):(c(),h(p,{key:0,xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(t,{label:"用户名",prop:"userName"},{"default":i((()=>[m(d,{modelValue:e.ruleForm.userName,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.userName=l),modelModifiers:{trim:!0},placeholder:"请输入用户名",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})),e.ruleForm.id?V("",!0):(c(),h(p,{key:1,xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(t,{label:"密码",prop:"userPassword"},{"default":i((()=>[m(d,{modelValue:e.ruleForm.userPassword,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.userPassword=l),placeholder:"请输入密码",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})),m(p,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(t,{label:"姓名",prop:"userNickname"},{"default":i((()=>[m(d,{modelValue:e.ruleForm.userNickname,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.userNickname=l),modelModifiers:{trim:!0},placeholder:"请输入姓名",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),m(p,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(t,{label:"关联角色",prop:"roleIds"},{"default":i((()=>[m(x,{options:e.roleData,props:{checkStrictly:!0,multiple:!0,emitPath:!1,value:"id",label:"name"},placeholder:"请选择角色",clearable:"","class":"w100",modelValue:e.ruleForm.roleIds,"onUpdate:modelValue":l[3]||(l[3]=l=>e.ruleForm.roleIds=l)},{"default":i((({node:e,data:l})=>[g("span",null,b(l.name),1),e.isLeaf?V("",!0):(c(),u("span",y," ("+b(l.children.length)+") ",1))])),_:1},8,["options","modelValue"])])),_:1})])),_:1}),m(p,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(t,{label:"组织",prop:"deptId"},{"default":i((()=>[m(x,{options:e.deptData,props:{checkStrictly:!0,emitPath:!1,value:"deptId",label:"deptName"},placeholder:"请选择组织",clearable:"","class":"w100",modelValue:e.ruleForm.deptId,"onUpdate:modelValue":l[4]||(l[4]=l=>e.ruleForm.deptId=l)},{"default":i((({node:e,data:l})=>[g("span",null,b(l.deptName),1),e.isLeaf?V("",!0):(c(),u("span",k," ("+b(l.children.length)+") ",1))])),_:1},8,["options","modelValue"])])),_:1})])),_:1}),m(p,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(t,{label:"手机号",prop:"mobile"},{"default":i((()=>[m(d,{modelValue:e.ruleForm.mobile,"onUpdate:modelValue":l[5]||(l[5]=l=>e.ruleForm.mobile=l),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),m(p,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(t,{label:"邮箱",prop:"userEmail"},{"default":i((()=>[m(d,{modelValue:e.ruleForm.userEmail,"onUpdate:modelValue":l[6]||(l[6]=l=>e.ruleForm.userEmail=l),placeholder:"请输入",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),m(p,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(t,{label:"性别",prop:"sex"},{"default":i((()=>[m(I,{modelValue:e.ruleForm.sex,"onUpdate:modelValue":l[7]||(l[7]=l=>e.ruleForm.sex=l),placeholder:"请选择",clearable:"","class":"w100"},{"default":i((()=>[m(F,{label:"保密",value:0}),m(F,{label:"男",value:1}),m(F,{label:"女",value:2})])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(p,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(t,{label:"岗位",prop:"postIds"},{"default":i((()=>[m(x,{options:e.postData,props:{checkStrictly:!0,multiple:!0,emitPath:!1,value:"postId",label:"postName"},placeholder:"请选择岗位",clearable:"","class":"w100",modelValue:e.ruleForm.postIds,"onUpdate:modelValue":l[8]||(l[8]=l=>e.ruleForm.postIds=l)},{"default":i((({node:e,data:l})=>[g("span",null,b(l.postName),1),e.isLeaf?V("",!0):(c(),u("span",w," ("+b(l.children.length)+") ",1))])),_:1},8,["options","modelValue"])])),_:1})])),_:1}),m(p,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(t,{label:"用户状态"},{"default":i((()=>[m(U,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[9]||(l[9]=l=>e.ruleForm.status=l),"inline-prompt":"","active-value":1,"inactive-value":0,"active-text":"启","inactive-text":"禁"},null,8,["modelValue"])])),_:1})])),_:1}),m(p,{xs:24,sm:24,md:24,lg:24,xl:24},{"default":i((()=>[m(t,{label:"用户描述"},{"default":i((()=>[m(d,{modelValue:e.ruleForm.remark,"onUpdate:modelValue":l[10]||(l[10]=l=>e.ruleForm.remark=l),type:"textarea",placeholder:"请输入用户描述",maxlength:"150"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}]]);export{I as default};
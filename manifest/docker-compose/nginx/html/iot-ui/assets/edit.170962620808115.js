import{_ as e,b as l,E as a}from"./index.1709626208081.js";import{p as o}from"./validator.1709626208081.js";import{d as r,h as t,a1 as s,aa as m,a as u,Y as d,S as i,e as n,ah as p,o as c,b as f,W as g,X as b,V as h,F,a7 as V,R as x}from"./vue.1709626208081.js";const _={parentId:-1,name:"",orderNum:0,leader:"",phone:"",email:"",status:1},v=r({name:"systemEditDept",setup(e,{emit:r}){const u=t(null),d=t([]),i=s({isShowDialog:!1,ruleForm:{..._},deptData:[],rules:{name:[{required:!0,message:"组织名称不能为空",trigger:"blur"}],leader:[{required:!0,message:"负责人不能为空",trigger:"change"}],phone:[{validator:o,trigger:"blur"}],email:[{type:"email",message:"请输入正确邮箱",trigger:"blur"}]}});l.user.getAllList({}).then((e=>{d.value=e}));const p=()=>{i.isShowDialog=!1},c=()=>{i.ruleForm={..._}};return{openDialog:e=>{c(),l.org.getList({status:1}).then((e=>{i.deptData=e||[]})),e&&"object"==typeof e?i.ruleForm=e:e&&"number"==typeof e&&(i.ruleForm.parentId=e),i.isShowDialog=!0},userList:d,closeDialog:p,onCancel:()=>{p()},onSubmit:()=>{const e=n(u);e&&e.validate((e=>{e&&(i.ruleForm.parentId||(i.ruleForm.parentId=-1),i.ruleForm.id?l.org.edit(i.ruleForm).then((()=>{a.success("修改成功"),p(),r("deptList")})):l.org.add(i.ruleForm).then((()=>{a.success("添加成功"),p(),r("deptList")})))}))},formRef:u,...m(i)}}}),w={"class":"system-edit-dept-container"},D={key:0},y={"class":"dialog-footer"};var k=e(v,[["render",function(e,l,a,o,r,t){const s=p("el-cascader"),m=p("el-form-item"),n=p("el-col"),_=p("el-input"),v=p("el-option"),k=p("el-select"),S=p("el-input-number"),U=p("el-switch"),L=p("el-row"),C=p("el-form"),I=p("el-button"),N=p("el-dialog");return c(),u("div",w,[d(N,{title:(e.ruleForm.id?"修改":"添加")+"区域",modelValue:e.isShowDialog,"onUpdate:modelValue":l[7]||(l[7]=l=>e.isShowDialog=l),width:"769px"},{footer:i((()=>[f("span",y,[d(I,{onClick:e.onCancel},{"default":i((()=>[g("取 消")])),_:1},8,["onClick"]),d(I,{type:"primary",onClick:e.onSubmit},{"default":i((()=>[g(b(e.ruleForm.id?"修 改":"添 加"),1)])),_:1},8,["onClick"])])])),"default":i((()=>[d(C,{ref:"formRef",model:e.ruleForm,rules:e.rules,"label-width":"90px"},{"default":i((()=>[d(L,{gutter:35},{"default":i((()=>[d(n,{xs:24,sm:24,md:24,lg:24,xl:24,"class":"mb20"},{"default":i((()=>[d(m,{label:"上级区域"},{"default":i((()=>[d(s,{options:e.deptData,props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name"},placeholder:"请选择区域",clearable:"","class":"w100",modelValue:e.ruleForm.parentId,"onUpdate:modelValue":l[0]||(l[0]=l=>e.ruleForm.parentId=l)},{"default":i((({node:e,data:l})=>[f("span",null,b(l.name),1),e.isLeaf?h("",!0):(c(),u("span",D," ("+b(l.children.length)+") ",1))])),_:1},8,["options","modelValue"])])),_:1})])),_:1}),d(n,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":i((()=>[d(m,{label:"区域名称",prop:"name"},{"default":i((()=>[d(_,{modelValue:e.ruleForm.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.ruleForm.name=l),modelModifiers:{trim:!0},"show-word-limit":"",maxlength:"20",placeholder:"请输入区域名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),d(n,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":i((()=>[d(m,{label:"负责人",prop:"leader"},{"default":i((()=>[d(k,{modelValue:e.ruleForm.leader,"onUpdate:modelValue":l[2]||(l[2]=l=>e.ruleForm.leader=l),modelModifiers:{trim:!0},placeholder:"请输入负责人",filterable:"",clearable:""},{"default":i((()=>[(c(!0),u(F,null,V(e.userList,(e=>(c(),x(v,{value:e.userNickname,label:e.userNickname,key:e.id},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),d(n,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":i((()=>[d(m,{label:"手机号",prop:"phone"},{"default":i((()=>[d(_,{modelValue:e.ruleForm.phone,"onUpdate:modelValue":l[3]||(l[3]=l=>e.ruleForm.phone=l),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),d(n,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":i((()=>[d(m,{label:"邮箱",prop:"email"},{"default":i((()=>[d(_,{modelValue:e.ruleForm.email,"onUpdate:modelValue":l[4]||(l[4]=l=>e.ruleForm.email=l),placeholder:"请输入",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),d(n,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":i((()=>[d(m,{label:"排序"},{"default":i((()=>[d(S,{modelValue:e.ruleForm.orderNum,"onUpdate:modelValue":l[5]||(l[5]=l=>e.ruleForm.orderNum=l),min:0,max:999,"controls-position":"right",placeholder:"请输入排序","class":"w100"},null,8,["modelValue"])])),_:1})])),_:1}),d(n,{xs:24,sm:12,md:12,lg:12,xl:12,"class":"mb20"},{"default":i((()=>[d(m,{label:"组织状态"},{"default":i((()=>[d(U,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[6]||(l[6]=l=>e.ruleForm.status=l),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"启","inactive-text":"禁"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}]]);export{k as default};
import{d as a,h as e,a1 as t,k as l,a as n,Y as o,S as i,j as r,ah as d,ar as s,o as u,a0 as p,a8 as c,T as m,R as f,W as b,X as g,Z as h}from"./vue.1709626208081.js";import{c as w}from"./index.17096262080818.js";import v from"./editParams.1709626208081.js";import{h as D,E as _}from"./index.1709626208081.js";const k={"class":"page"},y=a({__name:"index",setup(a){const{proxy:y}=r(),{network_certificate:x}=y.useDict("network_certificate"),C=e(),S=e(),V=e(),P=e(),U=t({ids:[],tableData:{data:[],loading:!1,param:{pageNum:1,PageSize:10,status:-1,name:""},total:0}}),j=()=>{U.tableData.loading=!0,w.certificateManagement.getList(U.tableData.param).then((a=>{U.tableData.data=a.Info||[],U.tableData.loading=!1,U.tableData.total=a.total}))};l((()=>{j()}));const z=(a,e)=>{switch(a){case"preview":C.value.openDialog({...e});break;case"add":S.value.openDialog();break;case"editParams":S.value.openDialog({...e});break;case"buildConfig":V.value.openDialog({...e});break;case"delete":D.confirm(`是否确认删除编号为"${e.id}"的数据项?`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{w.certificateManagement.del(e.id).then((()=>{_.success("删除成功"),j()}))}))["catch"]((()=>{}))}};return(a,e)=>{const t=d("el-input"),l=d("el-form-item"),r=d("ele-Search"),y=d("el-icon"),C=d("el-button"),V=d("ele-Refresh"),T=d("ele-FolderAdd"),B=d("el-form"),R=d("el-table-column"),M=d("el-switch"),N=d("el-table"),q=d("pagination"),F=d("el-card"),I=s("auth"),O=s("col"),W=s("noauth"),A=s("loading");return u(),n("div",k,[o(F,{shadow:"nover"},{"default":i((()=>[o(B,{model:U.tableData.param,ref_key:"queryRef",ref:P,inline:"",onSubmit:e[3]||(e[3]=p((()=>{}),["prevent"])),onKeyup:c(j,["enter"])},{"default":i((()=>[o(l,{label:"证书名称",prop:"keyWord"},{"default":i((()=>[o(t,{modelValue:U.tableData.param.name,"onUpdate:modelValue":e[0]||(e[0]=a=>U.tableData.param.name=a),placeholder:"请输入证书名称",clearable:""},null,8,["modelValue"])])),_:1}),o(l,null,{"default":i((()=>[m((u(),f(C,{type:"primary","class":"ml10",onClick:j},{"default":i((()=>[o(y,null,{"default":i((()=>[o(r)])),_:1}),b(" 查询 ")])),_:1})),[[I,"query"]]),m((u(),f(C,{onClick:e[1]||(e[1]=a=>{var e;(e=P.value)&&(e.resetFields(),j())})},{"default":i((()=>[o(y,null,{"default":i((()=>[o(V)])),_:1}),b(" 重置 ")])),_:1})),[[I,"reset"]]),m((u(),f(C,{type:"primary","class":"ml10",onClick:e[2]||(e[2]=a=>z("add"))},{"default":i((()=>[o(y,null,{"default":i((()=>[o(T)])),_:1}),b(" 新增证书 ")])),_:1})),[[I,"add"]])])),_:1})])),_:1},8,["model"]),m((u(),f(N,{data:U.tableData.data,style:{width:"100%"}},{"default":i((()=>[m(o(R,{label:"ID",align:"center",prop:"id",width:"100"},null,512),[[O,"id"]]),m(o(R,{label:"证书名称",prop:"name","min-width":"120","show-overflow-tooltip":""},null,512),[[O,"name"]]),m((u(),f(R,{label:"证书标准",prop:"standard","min-width":"120","show-overflow-tooltip":""},{"default":i((a=>{return[b(g((e=a.row.standard,null==(t=x.value.filter((a=>a.value==e))[0])?void 0:t.label)),1)];var e,t})),_:1})),[[O,"standard"]]),m(o(R,{label:"说明",prop:"description","min-width":"120","show-overflow-tooltip":""},null,512),[[O,"description"]]),o(R,{label:"状态",width:"120",align:"center"},{"default":i((a=>[m(o(M,{modelValue:a.row.status,"onUpdate:modelValue":e=>a.row.status=e,"inline-prompt":"","active-value":1,"inactive-value":0,"active-text":"启","inactive-text":"禁",onChange:e=>(a=>{let e=1===a.status?"启用":"停用";D.confirm('确认要"'+e+'"："'+a.name+'"证书吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return w.certificateManagement.editStatus({id:a.id,status:a.status})})).then((()=>{_.success(e+"成功")}))["catch"]((function(){a.status=0===a.status?1:0}))})(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[I,"startOrStop"]]),m((u(),n("span",null,[b(g(a.row.status?"正常":"暂停"),1)])),[[W,"startOrStop"]])])),_:1}),m((u(),f(R,{label:"操作",width:"100",align:"center",fixed:"right"},{"default":i((a=>[m((u(),f(C,{size:"small",text:"",type:"primary",onClick:e=>z("editParams",a.row)},{"default":i((()=>[b("编辑")])),_:2},1032,["onClick"])),[[I,"edit"]]),m((u(),f(C,{size:"small",text:"",type:"info",onClick:e=>z("delete",a.row)},{"default":i((()=>[b("删除")])),_:2},1032,["onClick"])),[[I,"del"]])])),_:1})),[[O,"handle"]])])),_:1},8,["data"])),[[A,U.tableData.loading]]),m(o(q,{total:U.tableData.total,page:U.tableData.param.pageNum,"onUpdate:page":e[4]||(e[4]=a=>U.tableData.param.pageNum=a),limit:U.tableData.param.pageSize,"onUpdate:limit":e[5]||(e[5]=a=>U.tableData.param.pageSize=a),onPagination:j},null,8,["total","page","limit"]),[[h,U.tableData.total>0]]),o(v,{ref_key:"editParamsRef",ref:S,onUpdate:j},null,512)])),_:1})])}}});export{y as default};
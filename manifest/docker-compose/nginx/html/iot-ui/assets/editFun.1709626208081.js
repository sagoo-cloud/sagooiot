import{a as e}from"./index.170962620808122.js";import{_ as t,C as a,D as l,F as o,E as u}from"./index.1709626208081.js";import s from"./editOption.1709626208081.js";import{v as i}from"./validator.1709626208081.js";import{d,h as n,a1 as p,aa as r,a as m,Y as y,S as c,e as f,ah as g,o as v,b as k,W as O,X as h,F as j,a7 as F,aA as b,aB as _}from"./vue.1709626208081.js";import"./typeItem.1709626208081.js";const C={productKey:"",type:"",name:"",key:"",status:1,dictType:"",inputs:[],outputs:[],valueType:{type:"",maxLength:""},desc:""},D=d({name:"deviceEditPro",components:{Plus:a,Minus:l,Right:o,EditOption:s},setup(t,{emit:a}){const l=n(null),o=n(),s=n(),d=p({isShowDialog:!1,typeData:[],type:"",types:"",productKey:"",valueType:{type:"",maxLength:"",trueText:"是",trueValue:"true",falseText:"否",falseValue:"false"},elementType:{type:"",maxLength:""},enumdata:[{text:"",value:""}],jsondata:[],inputsdata:[],outputsdata:[],ruleForm:JSON.parse(JSON.stringify(C)),rules:{name:[{required:!0,message:"功能定义名称不能为空",trigger:"blur"},{max:32,message:"功能定义名称不能超过32个字符",trigger:"blur"},{validator:i,message:"功能定义名称不能包含空格",trigger:"blur"}],key:[{required:!0,message:"功能定义标识不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择数据类型",trigger:"blur"}]}}),m=()=>{d.ruleForm=JSON.parse(JSON.stringify(C)),d.type="",d.types="",d.inputsdata=[],d.outputsdata=[],d.elementType=[],d.valueType={}},y=()=>{d.isShowDialog=!1};return{editOptionRef:o,editOptionOutRef:s,getOptionData:(e,t)=>{"fun"==t?d.inputsdata.push(e):d.jsondata.push(e)},getOptionDataOut:(e,t)=>{d.outputsdata.push(e)},openDialog:(e,t)=>{m(),d.ruleForm=e,d.productKey=t,d.inputsdata=e.inputs||[],d.outputsdata=e.outputs||[],d.isShowDialog=!0},editjson:(e,t)=>{"fun"==t?o.value.openDialog(d.inputsdata[e]):o.value.openDialog(d.jsondata[e])},editjsonOut:e=>{s.value.openDialog(d.outputsdata[e])},deljson:(e,t)=>{"fun"==t?d.inputsdata.splice(e,1):d.jsondata.splice(e,1)},deljsonOut:(e,t)=>{d.outputsdata.splice(e,1)},addEnum:()=>{d.enumdata.push({text:"",value:""})},delEnum:e=>{d.enumdata.splice(e,1)},addJson:e=>{o.value.openDialog({productKey:"",id:0,type_data:e})},addJsonOut:e=>{s.value.openDialog({productKey:"",id:0,type_data:e})},seletChange:e=>{d.type=e,d.ruleForm.type=e},seletChanges:e=>{d.types=e},closeDialog:y,onCancel:()=>{y()},onSubmit:()=>{const t=f(l);t&&t.validate((t=>{t&&(d.ruleForm.inputs=d.inputsdata,d.ruleForm.outputs=d.outputsdata,0!==d.ruleForm.id?(d.ruleForm.productKey=d.productKey,e.model.functionedit(d.ruleForm).then((()=>{u.success("功能定义类型修改成功"),y(),a("typeList")}))):e.model.functionadd(d.ruleForm).then((()=>{u.success("功能定义类型添加成功"),y(),a("typeList")})))}))},formRef:l,...r(d)}}}),x=e=>(b("data-v-4e8afb20"),e=e(),_(),e),T={"class":"system-edit-dic-container"},V={"class":"jsonlist"},S={"class":"jsonoption"},L={style:{display:"block",width:"100%"}},w=x((()=>k("div",null,"添加参数",-1))),R={"class":"jsonlist"},J={"class":"jsonoption"},K={style:{display:"block",width:"100%"}},E=x((()=>k("div",null,"添加参数",-1))),N={"class":"dialog-footer"};var U=t(D,[["render",function(e,t,a,l,o,u){const s=g("el-input"),i=g("el-form-item"),d=g("el-link"),n=g("Plus"),p=g("el-icon"),r=g("el-form"),f=g("el-button"),b=g("el-dialog"),_=g("EditOption");return v(),m("div",T,[y(b,{title:(0!==e.ruleForm.id?"修改":"添加")+"功能定义",modelValue:e.isShowDialog,"onUpdate:modelValue":t[5]||(t[5]=t=>e.isShowDialog=t),width:"769px"},{footer:c((()=>[k("span",N,[y(f,{onClick:e.onCancel},{"default":c((()=>[O("取 消")])),_:1},8,["onClick"]),y(f,{type:"primary",onClick:e.onSubmit},{"default":c((()=>[O(h(0!==e.ruleForm.id?"修 改":"添 加"),1)])),_:1},8,["onClick"])])])),"default":c((()=>[y(r,{model:e.ruleForm,ref:"formRef",rules:e.rules,"label-width":"120px"},{"default":c((()=>[y(i,{label:"功能定义标识",prop:"key"},{"default":c((()=>[y(s,{modelValue:e.ruleForm.key,"onUpdate:modelValue":t[0]||(t[0]=t=>e.ruleForm.key=t),placeholder:"请输入功能定义标识",disabled:0!==e.ruleForm.id},null,8,["modelValue","disabled"])])),_:1}),y(i,{label:"功能定义名称",prop:"name"},{"default":c((()=>[y(s,{modelValue:e.ruleForm.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.ruleForm.name=t),placeholder:"请输入功能定义名称"},null,8,["modelValue"])])),_:1}),y(i,{label:"输入参数",prop:"maxLength"},{"default":c((()=>[(v(!0),m(j,null,F(e.inputsdata,((t,a)=>(v(),m("div",{key:a,"class":"jslist"},[k("div",V,[k("div",null,"参数标识："+h(t.key),1),k("div",null,"参数名称："+h(t.name),1),k("div",null,"数据类型："+h(t.valueType.type),1),k("div",S,[y(d,{type:"primary",onClick:t=>e.editjson(a,"fun")},{"default":c((()=>[O("编辑")])),_:2},1032,["onClick"]),y(d,{type:"primary",onClick:t=>e.deljson(a,"fun")},{"default":c((()=>[O("删除")])),_:2},1032,["onClick"])])])])))),128)),k("div",L,[k("div",{"class":"input-options",onClick:t[2]||(t[2]=t=>e.addJson("fun"))},[y(p,null,{"default":c((()=>[y(n)])),_:1}),w])])])),_:1}),y(i,{label:"输出参数",prop:""},{"default":c((()=>[(v(!0),m(j,null,F(e.outputsdata,((t,a)=>(v(),m("div",{key:a,"class":"jslist"},[k("div",R,[k("div",null,"参数标识："+h(t.key),1),k("div",null,"参数名称："+h(t.name),1),k("div",null,"数据类型："+h(t.valueType.type),1),k("div",J,[y(d,{type:"primary",onClick:t=>e.editjsonOut(a)},{"default":c((()=>[O("编辑")])),_:2},1032,["onClick"]),y(d,{type:"primary",onClick:t=>e.deljsonOut(a,"fun")},{"default":c((()=>[O("删除")])),_:2},1032,["onClick"])])])])))),128)),k("div",K,[k("div",{"class":"input-options",onClick:t[3]||(t[3]=t=>e.addJsonOut("fun"))},[y(p,null,{"default":c((()=>[y(n)])),_:1}),E])])])),_:1}),y(i,{label:"功能定义描述\t",prop:"desc"},{"default":c((()=>[y(s,{modelValue:e.ruleForm.desc,"onUpdate:modelValue":t[4]||(t[4]=t=>e.ruleForm.desc=t),type:"textarea",placeholder:"请输入功能定义描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"]),y(_,{ref:"editOptionRef",key:"editOptionRef",onTypeList:e.getOptionData},null,8,["onTypeList"]),y(_,{ref:"editOptionOutRef",key:"editOptionOutRef",onTypeList:e.getOptionDataOut},null,8,["onTypeList"])])}],["__scopeId","data-v-4e8afb20"]]);export{U as default};
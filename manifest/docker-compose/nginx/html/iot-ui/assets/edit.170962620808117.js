import{d as e,h as l,a1 as a,R as o,S as d,n,ah as t,o as u,b as r,Y as p,W as i,V as m,a8 as s}from"./vue.1709626208081.js";import{b as f,E as c}from"./index.1709626208081.js";import{r as V}from"./validator.1709626208081.js";import{u as h}from"./index.170962620808113.js";const v={"class":"dialog-footer"},U=e({__name:"edit",emits:["getList"],setup(e,{expose:U,emit:_}){const b=_,g=l(!1),y=l(),k={id:"",types:"",handleType:"",name:"",title:"",description:"",version:"",author:"",icon:"",link:"",command:"",args:[],frontendUi:0,frontendUrl:"",frontendConfiguration:""},j=a({...k}),x={types:[V("插件类型不能为空")],handleType:[V("处理方式类型不能为空")],name:[V("名称不能为空")],title:[V("标题不能为空")]},C=e=>{j.icon=e},w=async()=>{await y.value.validate(),await f.plugin.edit(j),c.success("操作成功"),T(),g.value=!1,b("getList")},T=async()=>{Object.assign(j,{...k}),y.value&&y.value.resetFields()};return U({open:async e=>{T(),g.value=!0,n((()=>{Object.assign(j,e),j.author=JSON.parse(e.author).join(",")}))}}),(e,l)=>{const a=t("el-input"),n=t("el-form-item"),f=t("el-switch"),c=t("el-form"),V=t("el-button"),U=t("el-dialog");return u(),o(U,{"class":"api-edit",modelValue:g.value,"onUpdate:modelValue":l[14]||(l[14]=e=>g.value=e),title:"编辑插件内容",width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:d((()=>[r("div",v,[p(V,{onClick:l[13]||(l[13]=e=>g.value=!1)},{"default":d((()=>[i("取消")])),_:1}),p(V,{type:"primary",onClick:w},{"default":d((()=>[i("确定")])),_:1})])])),"default":d((()=>[p(c,{ref_key:"formRef",ref:y,model:j,rules:x,"label-width":"110px",onKeyup:s(w,["enter"])},{"default":d((()=>[p(n,{label:"插件类型",prop:"types"},{"default":d((()=>[p(a,{modelValue:j.types,"onUpdate:modelValue":l[0]||(l[0]=e=>j.types=e),placeholder:"输入接口名称"},null,8,["modelValue"])])),_:1}),p(n,{label:"功能类型",prop:"handleType"},{"default":d((()=>[p(a,{modelValue:j.handleType,"onUpdate:modelValue":l[1]||(l[1]=e=>j.handleType=e),placeholder:"输入功能类型"},null,8,["modelValue"])])),_:1}),p(n,{label:"名称",prop:"name"},{"default":d((()=>[p(a,{modelValue:j.name,"onUpdate:modelValue":l[2]||(l[2]=e=>j.name=e),placeholder:"输入名称"},null,8,["modelValue"])])),_:1}),p(n,{label:"标题",prop:"title"},{"default":d((()=>[p(a,{modelValue:j.title,"onUpdate:modelValue":l[3]||(l[3]=e=>j.title=e),placeholder:"输入标题"},null,8,["modelValue"])])),_:1}),p(n,{label:"说明",prop:"description"},{"default":d((()=>[p(a,{modelValue:j.description,"onUpdate:modelValue":l[4]||(l[4]=e=>j.description=e),placeholder:"输入名称"},null,8,["modelValue"])])),_:1}),p(n,{label:"版本",prop:"version"},{"default":d((()=>[p(a,{modelValue:j.version,"onUpdate:modelValue":l[5]||(l[5]=e=>j.version=e),placeholder:"输入版本"},null,8,["modelValue"])])),_:1}),p(n,{label:"作者",prop:"author"},{"default":d((()=>[p(a,{modelValue:j.author,"onUpdate:modelValue":l[6]||(l[6]=e=>j.author=e),placeholder:"输入作者"},null,8,["modelValue"])])),_:1}),p(n,{label:"插件图标",prop:"icon"},{"default":d((()=>[p(h,{img:j.icon,onSetImg:C},null,8,["img"])])),_:1}),p(n,{label:"插件网址",prop:"link"},{"default":d((()=>[p(a,{modelValue:j.link,"onUpdate:modelValue":l[7]||(l[7]=e=>j.link=e),placeholder:"输入插件网址"},null,8,["modelValue"])])),_:1}),p(n,{label:"运行指令",prop:"command"},{"default":d((()=>[p(a,{modelValue:j.command,"onUpdate:modelValue":l[8]||(l[8]=e=>j.command=e),placeholder:"输入运行指令"},null,8,["modelValue"])])),_:1}),p(n,{label:"指令参数",prop:"args"},{"default":d((()=>[p(a,{modelValue:j.args,"onUpdate:modelValue":l[9]||(l[9]=e=>j.args=e),placeholder:"输入指令参数"},null,8,["modelValue"])])),_:1}),p(n,{label:"有无插件页面",prop:"frontendUi"},{"default":d((()=>[p(f,{modelValue:j.frontendUi,"onUpdate:modelValue":l[10]||(l[10]=e=>j.frontendUi=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),j.frontendUi?(u(),o(n,{key:0,label:"插件页面地址",prop:"frontendUrl"},{"default":d((()=>[p(a,{modelValue:j.frontendUrl,"onUpdate:modelValue":l[11]||(l[11]=e=>j.frontendUrl=e),placeholder:"输入插件页面地址"},null,8,["modelValue"])])),_:1})):m("",!0),p(n,{label:"显示配置页面",prop:"frontendConfiguration"},{"default":d((()=>[p(f,{modelValue:j.frontendConfiguration,"onUpdate:modelValue":l[12]||(l[12]=e=>j.frontendConfiguration=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])}}});export{U as default};
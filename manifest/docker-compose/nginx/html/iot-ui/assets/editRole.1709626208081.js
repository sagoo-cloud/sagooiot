import{_ as e,b as a,E as l,r as t}from"./index.1709626208081.js";import{d as o,h as d,a1 as n,aa as r,a as s,Y as m,S as i,e as u,ah as c,o as f,b as p,W as h,X as g,V as D}from"./vue.1709626208081.js";const x={id:0,parentId:-1,name:"",status:1,listOrder:0,remark:""},k=o({name:"systemEditRole",props:{list:Array},setup(e,{emit:o}){const s=d(null),m=d(),i=n({loading:!1,isShowDialog:!1,formData:{...x},rules:{name:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]},menuData:[],menuExpand:!1,menuNodeAll:!1,menuCheckStrictly:!1,menuProps:{children:"children",label:"title"}}),c=()=>{i.isShowDialog=!1},f=()=>{a.menu.getList({status:-1}).then((e=>{i.menuData=e}))},p=()=>{i.menuCheckStrictly=!1,i.menuExpand=!1,i.menuNodeAll=!1,i.formData={...x}};const h=()=>{t()};return{openDialog:e=>{p(),f(),e&&a.role.getRole(e.id).then((e=>{i.formData=e})),i.isShowDialog=!0},closeDialog:c,onCancel:()=>{c()},onSubmit:()=>{const e=u(s);e&&e.validate((e=>{e&&(i.loading=!0,i.formData.parentId||(i.formData.parentId=-1),0===i.formData.id?a.role.addRole(i.formData).then((()=>{l.success("添加成功"),c(),h(),o("getList")}))["finally"]((()=>{i.loading=!1})):a.role.editRole(i.formData).then((()=>{l.success("修改成功"),c(),h(),o("getList")}))["finally"]((()=>{i.loading=!1})))}))},menuRef:m,formRef:s,handleCheckedTreeExpand:e=>{let a=i.menuData;for(let l=0;l<a.length;l++)m.value.store.nodesMap[a[l].id].expanded=e},getMenuAllCheckedKeys:function(){let e=m.value.getCheckedKeys(),a=m.value.getHalfCheckedKeys();return e.unshift.apply(e,a),e},handleCheckedTreeNodeAll:e=>{m.value.setCheckedNodes(e?i.menuData:[])},handleCheckedTreeConnect:e=>{i.menuCheckStrictly=!!e},resetMenuSession:h,...r(i)}}}),V={"class":"system-edit-role-container"},_={key:0},b={"class":"dialog-footer"};var y=e(k,[["render",function(e,a,l,t,o,d){const n=c("el-cascader"),r=c("el-form-item"),u=c("el-col"),x=c("el-input"),k=c("el-input-number"),y=c("el-switch"),C=c("el-row"),v=c("el-form"),S=c("el-button"),w=c("el-dialog");return f(),s("div",V,[m(w,{title:(0===e.formData.id?"添加":"修改")+"角色",modelValue:e.isShowDialog,"onUpdate:modelValue":a[5]||(a[5]=a=>e.isShowDialog=a),width:"769px"},{footer:i((()=>[p("span",b,[m(S,{onClick:e.onCancel},{"default":i((()=>[h("取 消")])),_:1},8,["onClick"]),m(S,{type:"primary",onClick:e.onSubmit,loading:e.loading},{"default":i((()=>[h(g(0===e.formData.id?"新 增":"修 改"),1)])),_:1},8,["onClick","loading"])])])),"default":i((()=>[m(v,{ref:"formRef",model:e.formData,rules:e.rules,"label-width":"90px"},{"default":i((()=>[m(C,{gutter:35},{"default":i((()=>[m(u,{xs:24,sm:24,md:24,lg:24,xl:24},{"default":i((()=>[m(r,{label:"上级角色"},{"default":i((()=>[m(n,{options:e.list,props:{label:"name",value:"id",checkStrictly:!0,emitPath:!1},placeholder:"请选择上级角色",clearable:"","class":"w100",modelValue:e.formData.parentId,"onUpdate:modelValue":a[0]||(a[0]=a=>e.formData.parentId=a)},{"default":i((({node:e,data:a})=>[p("span",null,g(a.name),1),e.isLeaf?D("",!0):(f(),s("span",_," ("+g(a.children.length)+") ",1))])),_:1},8,["options","modelValue"])])),_:1})])),_:1}),m(u,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(r,{label:"角色名称",prop:"name"},{"default":i((()=>[m(x,{modelValue:e.formData.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formData.name=a),modelModifiers:{trim:!0},placeholder:"请输入角色名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),m(u,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(r,{label:"排序"},{"default":i((()=>[m(k,{modelValue:e.formData.listOrder,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.listOrder=a),min:0,"controls-position":"right",placeholder:"请输入排序","class":"w100"},null,8,["modelValue"])])),_:1})])),_:1}),m(u,{xs:24,sm:12,md:12,lg:12,xl:12},{"default":i((()=>[m(r,{label:"角色状态"},{"default":i((()=>[m(y,{modelValue:e.formData.status,"onUpdate:modelValue":a[3]||(a[3]=a=>e.formData.status=a),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"启","inactive-text":"禁"},null,8,["modelValue"])])),_:1})])),_:1}),m(u,{xs:24,sm:24,md:24,lg:24,xl:24},{"default":i((()=>[m(r,{label:"角色描述"},{"default":i((()=>[m(x,{modelValue:e.formData.remark,"onUpdate:modelValue":a[4]||(a[4]=a=>e.formData.remark=a),type:"textarea",placeholder:"请输入角色描述",maxlength:"150"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}],["__scopeId","data-v-a2c4db40"]]);export{y as default};
import{d as e,h as l,a,Y as t,S as o,ah as n,ar as i,o as r,b as s,e as d,a8 as u,W as p,T as m,R as f,V as c}from"./vue.1709626208081.js";import b from"./edit.17096262080816.js";import h from"./detail.17096262080812.js";import{a as y}from"./modbus.1709626208081.js";import{u as _}from"./useCommonModbus.1709626208081.js";import{h as g,E as v}from"./index.1709626208081.js";import"./taskDialog.1709626208081.js";const w={"class":"page"},k={"class":"search"},x=e({__name:"index",setup(e){const x=l(),C=l(),j=l(),{params:V,tableData:R,getList:z,loading:F}=_(y.channel.getList,"list",{title:"",number:""});z();return(e,l)=>{const _=n("el-input"),L=n("el-form-item"),U=n("ele-Search"),D=n("el-icon"),T=n("el-button"),B=n("ele-Refresh"),G=n("ele-FolderAdd"),S=n("el-form"),q=n("el-table-column"),A=n("el-table"),E=n("pagination"),I=n("el-card"),K=i("auth"),M=i("loading");return r(),a("div",w,[t(I,{shadow:"nover"},{"default":o((()=>[s("div",k,[t(S,{model:d(V),inline:"",ref_key:"queryRef",ref:j,onKeyup:l[5]||(l[5]=u((e=>d(z)(1)),["enter","native"]))},{"default":o((()=>[t(L,{label:"通道名称",prop:"title"},{"default":o((()=>[t(_,{modelValue:d(V).title,"onUpdate:modelValue":l[0]||(l[0]=e=>d(V).title=e),placeholder:"请输入通道名称",clearable:"",style:{width:"240px"}},null,8,["modelValue"])])),_:1}),t(L,{label:"注册码",prop:"number"},{"default":o((()=>[t(_,{modelValue:d(V).number,"onUpdate:modelValue":l[1]||(l[1]=e=>d(V).number=e),placeholder:"请输入注册码",clearable:"",style:{width:"240px"}},null,8,["modelValue"])])),_:1}),t(L,null,{"default":o((()=>[t(T,{type:"primary","class":"ml10",onClick:l[2]||(l[2]=e=>d(z)(1))},{"default":o((()=>[t(D,null,{"default":o((()=>[t(U)])),_:1}),p(" 查询 ")])),_:1}),t(T,{onClick:l[3]||(l[3]=e=>(j.value.resetFields(),void z(1)))},{"default":o((()=>[t(D,null,{"default":o((()=>[t(B)])),_:1}),p(" 重置 ")])),_:1}),m((r(),f(T,{type:"primary",onClick:l[4]||(l[4]=e=>(async e=>{x.value.open(e)})())},{"default":o((()=>[t(D,null,{"default":o((()=>[t(G)])),_:1}),p(" 新增通道 ")])),_:1})),[[K,"add"]])])),_:1})])),_:1},8,["model"])]),m((r(),f(A,{data:d(R),style:{width:"100%"}},{"default":o((()=>[t(q,{type:"index",label:"序号",width:"80",align:"center"}),t(q,{prop:"title",label:"通道名称",align:"center","show-overflow-tooltip":""}),t(q,{prop:"number",label:"注册码",align:"center","show-overflow-tooltip":""}),t(q,{prop:"slaveId",label:"设备地址",align:"center","show-overflow-tooltip":""}),t(q,{label:"操作",width:"100",align:"center"},{"default":o((e=>[m((r(),f(T,{size:"small",text:"",type:"primary",onClick:l=>(async e=>{C.value.open(e)})(e.row)},{"default":o((()=>[p("详情")])),_:2},1032,["onClick"])),[[K,"detail"]]),m((r(),f(T,{size:"small",text:"",type:"info",onClick:l=>{return a=e.row,void g.confirm(`此操作将删除通道：“${a.title}”，是否继续?`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((async()=>{await y.channel.deleteDevice({number:a.number}),v.success("删除成功"),z(1)}));var a}},{"default":o((()=>[p("删除")])),_:2},1032,["onClick"])),[[K,"del"]])])),_:1})])),_:1},8,["data"])),[[M,d(F)]]),d(V).total?(r(),f(E,{key:0,total:d(V).total,page:d(V).page,"onUpdate:page":l[6]||(l[6]=e=>d(V).page=e),limit:d(V).size,"onUpdate:limit":l[7]||(l[7]=e=>d(V).size=e),onPagination:l[8]||(l[8]=e=>d(z)())},null,8,["total","page","limit"])):c("",!0),t(b,{ref_key:"editFormRef",ref:x,onGetList:l[9]||(l[9]=e=>d(z)(1))},null,512),t(h,{ref_key:"detailFormRef",ref:C,onGetList:l[10]||(l[10]=e=>d(z)(1))},null,512)])),_:1})])}}});export{x as default};